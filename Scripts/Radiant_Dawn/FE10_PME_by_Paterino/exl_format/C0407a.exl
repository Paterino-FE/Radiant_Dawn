include std:fe10:prelude;

callback[Event.Poke](11, 10, 12, "宝箱１") {
    TBoxOpen(EventGetX(), EventGetY());
    MindGetItem("IID_MATRONA");
    set("宝箱１");
}

def RegistLocationFlags() {
    regist("宝箱１");
}

def RegistLocationTT() {}

def RegistBaseTalkFlags() {
    regist("拠点会話_レニング");
    regist("拠点会話_訪問者");
    regist("拠点会話_ソーンバルケ");
    regist("拠点会話_竜鱗族");
    regist("拠点会話_カイネギス");
    regist("拠点会話_火消し");
}

#callback[0xE]("レニング", "拠点会話_レニング") {
#    if (Check()) {
#        if (((((!UnitCheckReadyToBaseTalkByPID("PID_ERINCIA") || !UnitCheckReadyToBaseTalkByPID("PID_LUCHINO")) || !UnitCheckReadyToBaseTalkByPID("PID_GEOFFRAY")) || !UnitCheckReadyToBaseTalkByPID("PID_ULYSSES")) || UnitGetByPID("PID_LENING")) || 0) {
#            return 0;
#        }
#        return 1;
#        goto l7;
#    }
#    TalkEvent_Important("MID_0407a_レニング会話");
#    if (IsConversationRoom()) {
#        return 0;
#    }
#    if (!UnitGetByPID("PID_LENING")) {
#        DisposLoad("bmap0407a");
#        JoinRank("bmap0407a_lening", 5);
#        DisposFree("bmap0407a");
#    }
#    set("拠点会話_レニング");
#    label l7;
#}

#callback[0xE]("訪問者", "拠点会話_訪問者") {
#    if (Check()) {
#        if ((!UnitCheckReadyToBaseTalkByPID("PID_MICAIAH") || 0) || 0) {
#            return 0;
#        }
#        return !UnitGetByPID("PID_SOANEVALCKE");
#        goto l4;
#    }
#    TalkEvent_Important("MID_0407a_訪問者会話");
#    if (IsConversationRoom()) {
#        return 0;
#    }
#    set("拠点会話_訪問者");
#    label l4;
#}

#callback[0xE]("ソーンバルケ", "拠点会話_ソーンバルケ") {
#    if (Check()) {
#        if ((!UnitCheckReadyToBaseTalkByPID("PID_MICAIAH") || !UnitCheckReadyToBaseTalkByPID("PID_SOANEVALCKE")) || 0) {
#           return 0;
#        }
#        return 1;
#        goto l4;
#    }
#    TalkEvent_Important("MID_0407a_ソーンバルケ会話");
#    if (IsConversationRoom()) {
#        return 0;
#    }
#    set("拠点会話_ソーンバルケ");
#    label l4;
#}

#callback[0xE]("竜鱗族", "拠点会話_竜鱗族") {
#    if (Check()) {
#        if (((!UnitCheckReadyToBaseTalkByPID("PID_KURTHNAGA") || 0) || 0) || 0) {
#            return 0;
#        }
#        return 1;
#        goto l5;
#    }
#    TalkEvent_Important("MID_0407a_竜鱗族会話");
#    if (IsConversationRoom()) {
#        return 0;
#    }
#    set("拠点会話_竜鱗族");
#    label l5;
#}

callback[0xE]("カイネギス", "拠点会話_カイネギス") {
    if (Check()) {
        if (((!UnitCheckPlayerOrAbsentByPID("PID_IKE") || !UnitCheckReadyToBaseTalkByPID("PID_CAINEGHIS")) || !UnitCheckReadyToBaseTalkByPID("PID_GIFFCA")) || 0) {
            return 0;
        }
        return 1;
        goto l5;
    }
    TalkEvent_Important("MID_0407a_カイネギス会話");
    if (IsConversationRoom()) {
        return 0;
    }
    if (UnitCheckPlayerOrAbsentByPID("PID_IKE")) {
        UnitGetItemShowing(UnitGetByPID("PID_IKE"), "IID_URVAN");
    }
    set("拠点会話_カイネギス");
    label l5;
}

callback[0xE]("火消し", "拠点会話_火消し") {
    if (Check()) {
        if ((!UnitCheckReadyToBaseTalkByPID("PID_IKE") || !UnitCheckReadyToBaseTalkByPID("PID_VOLKE")) || 0) {
            return 0;
        }
        return 1;
        goto l4;
    }
    TalkEvent_Important("MID_0407a_火消し会話");
    if (IsConversationRoom()) {
        return 0;
    }
    MindGetMoney(100000);
    set("拠点会話_火消し");
    label l4;
}

def DFSet_0407a_OP0() {}

def DFSet_0407a_OP1() {}

def DFSet_0407a_ED() {}

def anonfn13(v0, v1) {
    DisposLoad("emap0407c");
    Join("emap0407c_op0407a_caigif_c", 5);
    Join("emap0407c_op0407a_kurt_c", 5);
    DisposFree("emap0407c");
    anonfn23();
    anonfn24(v0, v1);
}

def anonfn14() {
    anonfn25();
    anonfn26();
    anonfn30();
    anonfn31();
}

def anonfn15() {
    BGMFadeIn(1, "BGM_EVT_4_7A_H", 1000);
    v0 = EnvPlay("SFX_ENV_0407A_SANCTUARY1");
    EnvVolDown();
    FadeIn_Wait(0);
    TalkEvent("MS_0407a_ED_02");
    BlackOut();
    BgmFadeOut_Normal(1);
    EnvVolResume();
    EnvFadeOut_Normal(v0);
}

def anonfn16() {
    BgmPlay(1, "BGM_EVT_4_7A_F");
    Warning("◆◆P01　回想シーン");
    v0 = EffectPlay("EID_MEMORY_HAZE");
    EffectLoop(v0, 1);
    EvRectSet("RID_MASK", 1);
    EvRectSet("RID_471-ミサハとエルラン1", 1);
    RectSetXYS("RID_471-ミサハとエルラン1", negate(356), negate(323), 100);
    EvRectSet("RID_471-ミサハとエルラン2", 0);
    RectSetXYS("RID_471-ミサハとエルラン2", 0, negate(41), 100);
    EvRectSet("RID_471-ミサハとエルラン3", 0);
    RectSetXYS("RID_471-ミサハとエルラン3", 0, negate(41), 100);
    RectSetCurve("RID_471-ミサハとエルラン1", 0, 4, negate(356), negate(204), 5000);
    RectSetCurve("RID_471-ミサハとエルラン1", 1, 4, negate(323), negate(138), 5000);
    RectSetCurve("RID_471-ミサハとエルラン1", 7, 4, 100, 62, 5000);
    TalkEvent("MS_0407a_OP_10_PEN_01");
    TalkResume();
    RectSetCurve("RID_471-ミサハとエルラン1", 9, 0, 255, 0, 200);
    WaitM(200);
    WaitM(500);
    RectSetCurve("RID_471-ミサハとエルラン2", 9, 0, 0, 255, 200);
    WaitM(200);
    TalkResume();
    RectSetCurve("RID_471-ミサハとエルラン3", 9, 0, 0, 255, 200);
    WaitM(200);
    RectSetCurve("RID_471-ミサハとエルラン2", 9, 0, 255, 0, 200);
    WaitM(200);
    TalkResume();
    EffectDelete(v0);
    RectKill("RID_471-ミサハとエルラン1");
    RectKill("RID_471-ミサハとエルラン2");
    RectKill("RID_471-ミサハとエルラン3");
    RectKill("RID_MASK");
    BgmFadeOut_Slow(1);
}

def anonfn17() {
    FadeIn_Wait(500);
    v0 = ["Pen1 ミサハとエルラン", ""];
    ScriptDbgMenu(&v0[0], 32, 32, 256);
    match (ScriptDbgMenuResult()) {
        0 -> {
            anonfn16();
        }
        else -> {}
    }
}

def Startup() {
    regist("ボス会話全体サイレス１");
    regist("ボス会話全体サイレス２");
    regist("ボス会話");
    regist("ボス会話アイク");
    regist("ボス会話ミカヤ");
    regist("ボス会話サナキ");
    regist("ボス会話ラフィエル");
    regist("ボス会話ニケ");
    regist("ボス会話ティバーン");
    regist("ボス会話リュシオン");
    regist("ボス会話リアーネ");
    regist("ボス会話オリヴァー");
    regist("ボス会話シグルーン");
    regist("ボス会話タニス");
    regist("ボス会話ハール");
    regist("ボス会話ジル");
    regist("ボス会話ステラ");
    regist("ボス会話２アイク");
    regist("ボス会話２ミカヤ");
    regist("ボス会話２サザ");
    regist("ボス会話２ペレアス");
    regist("ボス会話２ネサラ");
    regist("ボス会話２サナキ");
    regist("ボス会話２ラフィエル");
    regist("ボス会話２ニケ");
    regist("ボス会話２ティバーン");
    regist("ボス会話２リュシオン");
    regist("ボス会話２リアーネ");
    regist("ボス会話２オリヴァー");
    regist("ボス会話２シグルーンタニス");
    regist("ボス会話２ハール");
    regist("ボス会話２ジル");
    regist("ボス会話２ステラ");
    regist("進撃１");
    regist("進撃２");
    RegistLocationFlags();
    RegistBaseTalkFlags();
    regist("SKILL1");
    regist("SKILL2");
    regist("SKILL3");
    regist("GREEN1");
    regist("GREEN2");
    regist("GREEN3");
    regist("CASINO_DEAD");
    regist("FUCKOFFDSNOON");
    regist("ALONDITEGONE");
    regist("ボス会話2");
}

def gmap0407_advance() {
    FaceCreate(0, "FID_IKE2", 247, 320, 800, 26638);
    FaceCreate(1, "FID_TIBARN", 493, 298, 800, 26638);
    FaceCreate(2, "FID_MICAIAH2", 374, 232, 800, 26638);
    WaitM(3700);
    GMapPointOn(0, 375, 302, 100, 9187616);
}

def gmap0407_astarte() {
    WaitM(500);
    GMapPointOff(0);
    FaceDelete(0, 1000);
    FaceDelete(1, 1000);
    FaceDelete(2, 1000);
    WaitM(1600);
    RectSetCurve("RID_ｂｇアステルテ", 9, 0, 0, 255, 2000);
}

def gmap0407_point() {
    WaitM(2000);
    GMapPointOn(1, 375, 302, 100, 9210912);
}

def anonfn22() {
    BlackOut();
    GMapBuild("GID_0407");
    WaitF(1);
    GMapSetCurrentGID("GID_0407");
    GMapMove(625, 452, 8000, 7936, 0, 0);
    EvRectSet("RID_ｂｇアステルテ", 0);
    RectSetPos("RID_ｂｇアステルテ", 0, 0);
    EvRectSet("RID_MASK", 0);
    RectSetPos("RID_MASK", 0, 0);
    FacePreLoad("FID_TIBARN");
    FacePreLoad("FID_MICAIAH2");
    FacePreLoad("FID_IKE2");
    GMapBGMPlay();
    FadeIn_Wait(1500);
    WaitM(2000);
    CreateVMCThread("gmap0407_advance");
    TalkEvent("MS_0407_GMAP_01");
    CreateVMCThread("gmap0407_astarte");
    TalkResume();
    KillAllVMCThread();
    if (IsFaceEnable(0)) {
        FaceDelete(0, 400);
    }
    if (IsFaceEnable(1)) {
        FaceDelete(1, 400);
    }
    if (IsFaceEnable(2)) {
        FaceDelete(2, 400);
    }
    RectFadeOutDelete("RID_ｂｇアステルテ", 120);
    RectFadeOutDelete("RID_MASK", 120);
    CreateVMCThread("gmap0407_point");
    TalkResume();
    WaitM(1500);
    GMapBGMStop();
    FadeOut_Wait(1500);
    TalkResume();
    GMapKill("GID_0407");
    FaceDeleteImmAll();
    RectKillAll();
    KillAllVMCThread();
    if (Comeback()) {
        DisableSkip();
        WaitM(1500);
        EnableSkip();
        BlackOut();
    }
}

def anonfn23() {
    v0 = "RID_471-塔の光";
    v1 = EnvPlay("SFX_ENV_0407A_TOWER_LIGHT1");
    v2 = EnvPlay("SFX_ENV_0407A_TOWER_LIGHT2");
    v3 = EnvPlay("SFX_ENV_0407A_TOWER_LIGHT3");
    v4 = UnitGetByPID("PID_SENERIO");
    v5 = UnitGetByPID("PID_TIAMAT");
    RectBuild(v0);
    RectSetXYS(v0, negate(55), negate(416), 83);
    FadeIn(1500);
    RectSetCurve(v0, 0, 4, negate(55), negate(26), 12000);
    RectSetCurve(v0, 1, 4, negate(416), negate(241), 12000);
    RectSetCurve(v0, 7, 4, 83, 100, 12000);
    FadeWait();
    WaitM(11000);
    if (UnitCheckLive(v4)) {
        if (UnitCheckLive(v5)) {
            TalkEvent("MS_0407a_OP_01A");
            goto l2;
        }
        TalkEvent("MS_0407a_OP_01B");
        label l2;
        goto l3;
    }
    if (UnitCheckLive(v5)) {
        TalkEvent("MS_0407a_OP_01C");
        goto l3;
    }
    TalkEvent("MS_0407a_OP_01D");
    label l3;
    FadeOut_Wait(1500);
    EnvFadeOut_Normal(v1);
    EnvFadeOut_Normal(v2);
    EnvFadeOut_Normal(v3);
    RectKill(v0);
}

def anonfn24(v0, v1) {
    v2 = "RID_外観-ベグニオン2";
    BgmPlay(1, "BGM_EVT_4_7A_A");
    v3 = EnvPlay("SFX_ENV_0407A_GATE1");
    v4 = ENVPlay3D("SFX_ENV_0407A_LAKE1", 1450, 1250, 0, 500);
    EventMapLoad("emap0407c", 1);
    SetCameraMoment_RotAt(1762, 5600, 1700, 1450, 250, negate(500));
    InstantDispos("emap0407c_op0407a_01_c");
    InstantDispos("emap0407c_op0407a_02_c");
    ForceUnitTransform(0, 0, 1);
    v5 = UnitGetByPID("PID_IKE");
    v6 = UnitGetByPID("PID_SKRIMIR");
    v7 = UnitGetByPID("PID_LAY");
    v8 = UnitGetByPID("PID_TIBARN");
    v9 = UnitGetByPID("PID_VULCI");
    v10 = UnitGetByPID("PID_JANAFF");
    v11 = UnitGetByPID("PID_ERINCIA");
    v12 = UnitGetByPID("PID_LUCHINO");
    v13 = UnitGetByPID("PID_RIEUSION");
    v14 = UnitGetByPID("PID_CAINEGHIS");
    v15 = UnitGetByPID("PID_GIFFCA");
    v16 = UnitGetByPID("PID_MICAIAH");
    if (!v0) {
        UnitHide(v10);
    }
    if (!v1) {
        UnitHide(v9);
    }
    RectBuild(v2);
    UnitRotate_Moment(v16, 9);
    v17 = TelopIn("EID_T0407A");
    RectSetCurve(v2, 1, 0, 0, negate(500), 6000);
    WaitM(6000);
    TelopWait();
    TalkEvent("MS_0407a_OP_02_01");
    BGM1FadeOut();
    BGM2Start("BGM_EVT_4_7A_B");
    TalkResume();
    XFade_Capture();
    RectKill(v2);
    TalkResume();
    XFade_StartWait(1500);
    BGM2VolumeDown();
    BuildInstAnim(14, 6, 0);
    WaitM(3000);
    SetCameraDecel_RotAt(3000, 1762, 5600, 1700, 1450, 2050, negate(500));
    TalkEvent("MS_0407a_OP_02_02");
    CameraWait();
    v18 = 300;
    UnitWalkTime(v18);
    UnitMoveRouteDir(v14, "14,14", 4);
    WaitM(v18);
    UnitMoveRouteDir(v15, "13,13", 4);
    WaitM(1000);
    UnitMoveRouteDir(v8, "16,14", 4);
    UnitMoveRouteDir(v13, "15,13", 4);
    WaitM(v18 * 4);
    UnitMoveRouteDir(v11, "12,12", 4);
    UnitMoveRouteDir(v12, "13,11", 4);
    UnitMoveRouteDir(v7, "14,11", 4);
    UnitMoveWaitID(v14);
    UnitMoveRouteDir(v9, "14,4, 15,8", 4);
    UnitMoveRouteDir(v10, "15,4, 16,9", 4);
    UnitWalkTime(negate(1));
    SetCameraDecel_RotAt(2000, 1762, 5600, 1700, 1450, 1250, negate(500));
    CameraWait();
    TalkEvent("MS_0407a_OP_02_03");
    UnitMoveRouteDir(v5, "15,16", 8);
    UnitMoveRouteDir(v6, "13,16", 8);
    UnitMoveWait();
    TalkResume();
    UnitRotateSilentToTarget_Normal(v5, v8);
    TalkResume();
    UnitRotateSilentToTarget_Normal(v8, v5);
    TalkResume();
    ForceUnitRotateSilentToTarget_Normal(0, v16);
    SetCameraDecel_RotAt(2000, 1762, 5600, 1700, 1650, 1750, negate(500));
    WaitM(1000);
    TalkResume();
    CameraWait();
    UnitMoveWait();
    BGM2FadeOut();
    FadeOut_Wait(500);
    BuildInstAnim(14, 6, 3);
    EventMapFree(1);
    FadeIn_Wait(0);
    TalkEvent("MS_0407a_OP_03_01");
    BGM1Start("BGM_EVT_4_7A_C");
    TalkResume();
    FadeOut_Wait(0);
    BgmFadeOut_Normal(1);
    EnvFadeOut_Normal(v3);
    EnvFadeOut_Normal(v4);
}

def anonfn25() {
    v0 = "RID_ベグニオン-鐘が鳴る";
    v1 = "RID_外観-ベグニオン";
    v2 = EnvPlay("SFX_ENV_0407A_TOWER_AMB1");
    RectBuild(v0);
    RectBuild(v1);
    WaitF(1);
    RectSetXY(v0, negate(295), negate(50));
    RectSetXYZS(v1, 0, 0, 50, 100);
    SFXPlay("SFX_EVT_0407A_BELL1");
    RectSetCurve(v0, 7, 0, 110, 90, 4500);
    FadeIn_Wait(1500);
    WaitM(2500);
    BgmPlay(1, "BGM_EVT_4_7A_D");
    RectSetCurve(v0, 9, 0, 255, 0, 500);
    RectSetCurve(v1, 0, 0, 0, negate(214), 4000);
    RectSetCurve(v1, 1, 0, 0, negate(133), 4000);
    RectSetCurve(v1, 7, 0, 100, 63, 4000);
    WaitM(500);
    TalkEvent("MS_0407a_OP_04");
    WhiteOut();
    RectKill(v0);
    RectKill(v1);
    SFXStop("SFX_EVT_0407A_BELL1");
    EnvFadeOut_Normal(v2);
}

def anonfn26() {
    v0 = EnvPlay("SFX_ENV_0407A_GATE1");
    v1 = ENVPlay3D("SFX_ENV_0407A_LAKE1", 1450, 1250, 0, 500);
    EventMapLoad("emap0407c", 1);
    SetCameraMoment_RotAt(2, 7080, 2844, 1450, 603, negate(291));
    BuildInstAnim(14, 6, 4);
    InstantDispos("emap0407c_op0407a_06_c");
    v2 = PostEffectStart(3, 5, 255, 0);
    WFadeIn(1500);
    DisposWarp("emap0407c_op0407a_05_c");
    ForceUnitAnim(1, "待機");
    PostEffectStop(v2, 3000);
    DisposWarp("emap0407c_op0407a_04_c");
    ForceUnitAnim(1, "待機");
    DisposWarp("emap0407c_op0407a_03_c");
    ForceUnitAnim(1, "待機");
    TalkEvent("MS_0407a_OP_04_02");
    ForceUnitAnim(1, "構え");
    TalkResume();
    SetUnitAlways(1);
    SetCameraLinear_RotAt(3000, 2, 7363, 3511, 1450, 550, negate(291));
    BgmFadeOut_Normal(1);
    WaitM(1500);
    BgmPlay(1, "BGM_EVT_4_7A_E");
    FadeOut_Wait(1500);
    CameraClear();
    SetUnitAlways(0);
    EnvFadeOut_Normal(v0);
    EnvFadeOut_Normal(v1);
    BuildInstAnim(14, 6, 3);
    EventMapFree(1);
}

def AttackThread(v0) {
    UnitAnim(v0, "攻撃１");
    UnitMoveWaitID(v0);
    UnitAnim(v0, "構え");
}

def DamageThread(v0) {
    UnitHitEffect(v0);
    UnitAnim(v0, "ダメージ");
    UnitMoveWaitID(v0);
    UnitAnim(v0, "構え");
}

def BattleThread(v0, v1, v2) {
    CreateVMCThread1("AttackThread", v0);
    WaitM(v2);
    CreateVMCThread1("DamageThread", v1);
}

def anonfn30() {
    v0 = 0;
    v1 = 0;
    v2 = EnvPlay("SFX_ENV_0407A_GATE1");
    v3 = ENVPlay3D("SFX_ENV_0407A_LAKE1", 1450, 1250, 0, 500);
    EventMapLoad("emap0407c", 1);
    SetCameraMoment_RotAt(2247, 5635, 1500, 1050, 1950, negate(500));
    BuildInstAnim(14, 6, 4);
    InstantDispos("emap0407c_op0407a_07_c");
    InstantDispos("emap0407c_op0407a_08_c");
    InstantDispos("emap0407c_op0407a_09_c");
    v4 = UnitGetByPID("PID_IKE");
    UnitSetAnim(v4, "剣");
    UnitAnim(v4, "待機");
    v5 = UnitGetByPID("PID_MICAIAH");
    ForceUnitTransform(0, 1, 1);
    v6 = UnitGetByPID("PID_LAY");
    v7 = UnitGetByPID("PID_NIKE");
    v8 = UnitGetByPID("PID_TIBARN");
    v9 = UnitGetByPID("PID_CAINEGHIS");
    v10 = UnitGetByPID("PID_KURTHNAGA");
    v11 = UnitGetByPID("PID_ENA");
    ForceUnitAnim(0, "構え");
    ForceUnitAnim(1, "構え");
    UnitAnim_Moment(v5, "イベント１");
    InstantDispos("emap0407c_op0407a_10_c");
    v12 = UnitGetByPos(24, 26);
    UnitHide(v12);
    if (!UnitQueryJID(v4, "JID_VANGUARD")) {
        if (!UnitQueryJID(v5, "JID_SHAMAN")) {
            goto l1;
        }
        label l1;
        goto l2;
    }
    if (!UnitQueryJID(v5, "JID_SHAMAN")) {
        goto l2;
    }
    label l2;
    SetCameraDecel_RotAt(5000, 2247, 5635, 1500, 2574, 2526, negate(500));
    FadeIn(1500);
    WaitM(1000);
    CreateVMCThread3("BattleThread", v9, UnitGetByPos(14, 16), 1100);
    WaitM(300);
    CreateVMCThread3("BattleThread", UnitGetByPos(15, 22), v8, 600);
    WaitM(500);
    CreateVMCThread3("BattleThread", UnitGetByPos(17, 24), v6, 400);
    WaitM(400);
    CreateVMCThread3("BattleThread", v7, UnitGetByPos(17, 21), 500);
    WaitM(200);
    CreateVMCThread3("BattleThread", UnitGetByPos(19, 16), UnitGetByPos(19, 17), 700);
    WaitM(1100);
    CreateVMCThread1("AttackThread", v4);
    WaitM(550);
    HitEffect(25, 22);
    UnitDeadEscape(UnitGetByPos(25, 22));
    UnitMoveWaitID(v4);
    UnitAnim(v4, "構え");
    WaitM(1000);
    UnitRotateSilent_Normal(v4, 9);
    UnitMoveWaitID(v4);
    WaitM(300);
    UnitRotateSilent_Normal(v4, 5);
    UnitMoveWaitID(v4);
    WaitM(1000);
    UnitAnim(v4, "待機");
    UnitMoveRouteDir(v4, "24,25", 1);
    UnitMoveWaitID(v4);
    BgmVolDown(1);
    UnitSetHand(v4, 1);
    if (UnitQueryJID(v4, "JID_BRAVE")) {
        UnitAnim(v4, "イベント１");
        goto l4;
    }
    UnitAnim(v4, "イベント２");
    label l4;
    TalkEvent("MS_0407a_OP_05");
    UnitHide(v4);
    UnitHide(v5);
    UnitSetPos(v12, 24, 25);
    UnitShow(v12);
    UnitAnim(v12, "イベント１");
    UnitMoveWaitID(v12);
    TalkResume();
    UnitAnim(v12, "イベント２");
    UnitMoveWaitID(v12);
    UnitHide(v12);
    UnitShow(v4);
    UnitShow(v5);
    TalkResume();
    UnitSetHand(v4, 0);
    UnitAnim(v4, "待機");
    TalkResume();
    UnitAnim(v5, "待機");
    TalkResume();
    CameraWaitOnly();
    UnitHide(UnitGetByPos(19, 16));
    #if (!UnitQueryJID(v4, "JID_VANGUARD")) {
    #    UnitMoveRoute(v4, "22,27");
    #    WaitM(500);
    #    UnitRotateSilent_Normal(v5, 4);
    #    TalkEvent("MS_0407a_OP_06_01");
    #    UnitMoveWait();
    #    UnitRotateSilentToTarget_Normal(v4, v5);
    #    TalkResume();
    #    UnitMoveWait();
    #    UnitMoveRouteDir(v4, "23,26", 8);
    #    UnitMoveWait();
        #Comeback();
        #DisableSkip();
        #if (!UnitQueryJID(v5, "JID_SHAMAN")) {
        #    UnitAnim(v5, "イベント６");
        #    goto l7;
        #}
        #UnitAnim(v5, "イベント１２");
        #label l7;
        #WaitM(1000);
        #v0 = 1;
        #BgmMuteOn(1);
        #NetuzoInit();
        #NetuzoBG("bgイベント用01");
        #UnitClassChange(v4);
        #BgmMuteOff(1);
        #UnitAnim(v5, "待機");
        #EnableSkip();
    #    TalkEvent("MS_0407a_OP_06_02");
    #    UnitMoveRoute(v4, "22,27, 22,30, 18,32");
    #    goto l8;
    #}
    UnitMoveRoute(v4, "22,27, 22,30, 18,32");
    WaitM(500);
    UnitRotateSilent_Normal(v5, 4);
    label l8;
    #if (!UnitQueryJID(v5, "JID_SHAMAN")) {
    #    UnitMoveWait();
    #    TalkEvent("MS_0407a_OP_07_01");
        #Comeback();
        #DisableSkip();
        #UnitAnim(v5, "イベント６");
        #WaitM(1000);
        #v1 = 1;
        #NetuzoInit();
        #NetuzoBG("bgイベント用01");
        #BgmMuteOn(1);
        #UnitClassChange(v5);
        #BgmMuteOff(1);
        #UnitAnim(v5, "待機");
        #EnableSkip();
    #    TalkEvent("MS_0407a_OP_07_02");
    #    goto l10;
    #}
    WaitM(500);
    label l10;
    CameraClear();
    FadeOut_Wait(1500);
    KillAllVMCThread();
    UnitMoveDelete(negate(1));
    BuildInstAnim(14, 6, 3);
    EventMapFree(1);
    BgmFadeOut_Normal(1);
    EnvFadeOut_Normal(v2);
    EnvFadeOut_Normal(v3);
    #if (v0) {
    #    v13 = UnitGetByPID("PID_IKE");
    #    if (v13) {
    #        InstantUnitClassChange(v13);
    #    }
    #}
    #if (v1) {
    #    v13 = UnitGetByPID("PID_MICAIAH");
    #    if (v13) {
    #        InstantUnitClassChange(v13);
    #    }
    #}
}

def anonfn31() {
    TalkEvent("MS_0407a_OP_08_01_01");
    BlackOut();
}

def anonfn32() {
    v0 = 0;
    v1 = EnvPlay("SFX_ENV_0407A_GATE1");
    v2 = ENVPlay3D("SFX_ENV_0407A_LAKE1", 1450, 1250, 0, 500);
    FadeIn_Wait(0);
    Comeback();
    DisableSkip();
    TalkEvent("MS_0407a_OP_08_01_02");
    v3 = 0;
    v4 = 2;
    v5 = 2;
    v6 = 2;
    if (UnitCheckLiveByPID("PID_RAFIEL")) {
        v4 = 0;
    }
    if (UnitCheckLiveByPID("PID_RIEUSION")) {
        v5 = 0;
    }
    if (UnitCheckLiveByPID("PID_LEARNE")) {
        v6 = 0;
    }
    if ((v4 == 0 || v5 == 0) || v6 == 0) {
        Dialog3ItemsWithSt("MS_0407a_OP_08_02A_01", "MS_0407a_OP_08_02B_01", "MS_0407a_OP_08_02C_01", v4, v5, v6);
        v7 = DialogGetRes();
        goto l6;
    }
    v7 = 3;
    label l6;
    EnableSkip();
    match (v7) {
        0 -> {
            TalkEvent("MS_0407a_OP_08_02A_02");
            TeamTransferPID("PID_RAFIEL", 5);
        }
        1 -> {
            TalkEvent("MS_0407a_OP_08_02B_02");
            TeamTransferPID("PID_RIEUSION", 5);
        }
        2 -> {
            TalkEvent("MS_0407a_OP_08_02C_02");
            TeamTransferPID("PID_LEARNE", 5);
        }
        else -> {
            TalkEvent("MS_0407a_OP_08_02D");
        }
    }
    TalkEvent("MS_0407a_OP_08_CASINO");
    TalkEvent("MS_0407a_OP_09");
    EnvFadeOut_Normal(v1);
    EnvFadeOut_Normal(v2);
    BlackOut();
}

@NoDefaultReturn
def anonfn33() {
    v0 = "RID_塔内-フロア-玄関";
    v1 = EnvPlay("SFX_ENV_0407A_SANCTUARY1");
    RectBuild(v0);
    WaitF(1);
    RectSetCurve(v0, 1, 0, negate(400), negate(566), 4000);
    v2 = GetTime();
    FadeIn_Wait(1500);
    TalkEvent("MS_0407a_OP_10_01");
    #if (GameGetRound() >= 2) {
    #    WaitM(1000);
    #    TalkEvent("MS_0407a_OP_10_02");
    #    RectSetCurve(v0, 1, 4, negate(556), 0, 3000);
    #    WaitM(1500);
    #    WFadeOut_Wait(1500);
    #    goto l1;
    #}
    FadeOut_Wait(1500);
    label l1;
    ENVSilentOn(4000);
    RectKill(v0);
    return v1;
}

def anonfn34(v0) {
    v1 = "RID_塔内-フロア-玄関";
    ENVSilentOff(1000);
    RectBuild(v1);
    WaitF(1);
    RectSetCurve(v1, 1, 4, 0, negate(566), 1500);
    WFadeIn_Wait(1500);
    TalkEvent("MS_0407a_OP_10_03");
    FadeOut_Wait(1500);
    EnvFadeOut_Normal(v0);
    RectKill(v1);
}

def ThreadSanaki() {
    v0 = UnitGetByPID("PID_SANAKI");
    UnitMovePosDir(v0, 17, 22, 8);
    UnitMoveWaitID(v0);
    UnitAnim_Speed(v0, "魔法１", 100);
    UnitMoveWaitID(v0);
    UnitAnim(v0, "構え");
}

def anonfn36(v0, v1, v2, v3) {
    if (v0 == 0) {
        return 0;
    }
    if (IsFlyingBirdHuman(v0)) {
        UnitWaitAnim("イベント１１");
    }
    if (IsFlyingKnight(v0)) {
        UnitWaitAnim("イベント１１");
    }
    UnitMovePosDir(v0, v1, v2, v3);
    UnitWaitAnim("");
}

def anonfn37() {
    EventMapLoad("bmap0407a", 1);
    SetCameraMoment_RotAt(negate(7154), 5445, 1900, 1750, 2793, negate(36));
    SallySetByGroup("bmap0407a_mikata_c");
    InstantDispos("bmap0407a_mikata_c");
    InstantDispos("bmap0407a_op0407a_02_c");
    v0 = UnitGetByPID("PID_SANAKI");
    v1 = UnitGetByPID("PID_LEKAIN");
    v2 = UnitGetByPID("PID_HETZEL");
    v3 = UnitGetByPID("PID_MICAIAH");
    FadeIn(500);
    UnitWalkTime(300);
    UnitMovePosDir(v0, 17, 23, 8);
    anonfn36(UnitGetByPos(16, 32), 18, 25, 8);
    anonfn36(UnitGetByPos(18, 31), 16, 25, 8);
    anonfn36(UnitGetByPos(17, 31), 15, 25, 8);
    anonfn36(UnitGetByPos(17, 34), 17, 27, 8);
    anonfn36(UnitGetByPos(18, 34), 17, 28, 8);
    anonfn36(UnitGetByPos(16, 30), 16, 24, 8);
    anonfn36(UnitGetByPos(16, 33), 16, 26, 8);
    anonfn36(UnitGetByPos(17, 33), 17, 26, 8);
    anonfn36(UnitGetByPos(16, 29), 15, 23, 8);
    anonfn36(UnitGetByPos(18, 29), 19, 23, 8);
    if (UnitGetByPos(17, 30) && UnitGetByPos(17, 30) != v0) {
        anonfn36(UnitGetByPos(17, 30), 18, 24, 8);
    }
    UnitWalkTime(negate(1));
    UnitWalkTime(500);
    UnitMovePosDir(v1, 17, 19, 4);
    UnitMovePosDir(v2, 16, 18, 4);
    UnitWalkTime(negate(1));
    SetCameraLinear_RotAt(3000, negate(7154), 5445, 1900, 1731, 2257, negate(180));
    UnitMoveWait();
    FadeWait();
    CameraWait();
    BgmPlay(1, "BGM_EVT_4_7A_G");
    TalkEvent("MS_0407a_OP_11_01");
    UnitMovePosDir(v3, 16, 22, 8);
    UnitMoveWait();
    TalkResume();
    UnitMovePosDir(v0, 17, 22, 8);
    UnitMoveWait();
    TalkResume();
    #if (GameGetRound() >= 2) {
    #    TalkEvent("MS_0407a_OP_11_01_PEN_01");
    #    TalkEvent("MS_0407a_OP_11_01_PEN_02");
    #}
    TalkEvent("MS_0407a_OP_11_02");
    XFade_Capture();
    SetCameraMoment_RotAt(0, 7181, 1915, 1732, 1824, negate(80));
    XFade_StartWait(1500);
    TalkResume();
    CreateVMCThread("ThreadSanaki");
    TalkResume();
    UnitMovePosDir(v1, 17, 20, 4);
    TalkResume();
    WaitForVMCThread();
    UnitMoveWaitID(v1);
    v4 = PostEffectStart(6, 16, 127, 1000);
    UnitAnimEx(v1, "杖", negate(1), negate(1), 1);
    BgmFadeOut_Normal(1);
    WFadeOut_Wait(1500);
    PostEffectStop(v4, 0);
    EventMapFree(1);
}

def anonfn38() {
    anonfn32();
    v0 = anonfn33();
    #if (GameGetRound() >= 2) {
    #    #anonfn16();
    #    #anonfn34(v0);
    #    goto l1;
    #}
    EnvFadeOut_Normal(v0);
    label l1;
    anonfn37();
}

callback[Event.Turn](1, 1, 1) {
    if (EvKeyRead()) {
        set("gf_complete");
    }
}

def anonfn40() {
    EvDevStart("bmap0407a", "bmap0407a_mikata");
    if (Comeback()) {
        WFadeOut_Wait(300);
    }
    WhiteOut();
    Comeback();
    WhiteOut();
    MapLoad("bmap0407a");
    SallySetByGroupRank("bmap0407a_mikata");
    InstantDisposRank("bmap0407a_mikata");
    UnitForcedSallyByPID("PID_IKE");
    UnitDontMoveSallyByPID("PID_IKE");
    UnitForcedSallyByPID("PID_MICAIAH");
    UnitDontMoveSallyByPID("PID_MICAIAH");
    UnitForcedSallyByPID("PID_SOTHE");
    UnitDontMoveSallyByPID("PID_SOTHE");
    InstantDisposRank("bmap0407a_teki");
    v0 = UnitGetByPID("PID_NEALUCHI");
    UnitAddSkill(v0, "SID_EXPANDRANGEO_1");
    v0 = 1;
    v1 = ForceGetFirst(0);
    while (v0 != 0) {
        v0 = UnitGetNext(v1);
        UnitRotate(v1, 8, 0);
        v1 = v0;
    }
    InstantHeroFocus();
    WFadeIn_Wait(500);
}

def Opening0() {
    BlackOut();
    if (EvKeyReadY()) {
        anonfn17();
    }
    v0 = ForceUnitGetByPID(10, "PID_JANAFF");
    v1 = ForceUnitGetByPID(10, "PID_VULCI");
    TEAM_0407a_OP();
    if (EvKeyReadY()) {
        anonfn15();
    }
    anonfn22();
    ChapterTitle("C0407a");
    v2 = UnitGetByPID("PID_VIZE");
    v3 = UnitGetByPID("PID_DARKKNIGHT_0");
    if (!UnitTstSkill(v2, "SID_EQ_A")) {
        UnitAddSkill(v2, "SID_EQ_A");
    }    
    if (!UnitTstSkill(v3, "SID_EQ_A")) {
        UnitAddSkill(v3, "SID_EQ_A");
    }
    anonfn13(v0, v1);
    DFSet_0407a_OP0();
}

def Opening1() {
    anonfn14();
    DFSet_0407a_OP1();
}

def anonfn43() {
    BlackOut();
    MapLoad("emap0407d");
    UnitNeverSallyByPID("PID_RIEUSION");
    UnitNeverSallyByPID("PID_LEARNE");
    UnitNeverSallyByPID("PID_RAFIEL");
    SallySetByGroup("emap0407d_mikata_c");
    InstantDispos("emap0407d_mikata_c");
    UnitForcedSallyByPID("PID_IKE");
    UnitDontMoveSallyByPID("PID_IKE");
    UnitForcedSallyByPID("PID_MICAIAH");
    UnitDontMoveSallyByPID("PID_MICAIAH");
    UnitForcedSallyByPID("PID_SOTHE");
    UnitDontMoveSallyByPID("PID_SOTHE");
    #UnitForcedSallyByPID("PID_SANAKI");
    #UnitDontMoveSallyByPID("PID_SANAKI");
    #UnitForcedSallyByPID("PID_KURTHNAGA");
    #UnitDontMoveSallyByPID("PID_KURTHNAGA");
    #UnitForcedSallyByPID("PID_ENA");
    #UnitDontMoveSallyByPID("PID_ENA");
}

def anonfn44() {
    UnitTransferToForceALL(5, 8);
    UnitTransferToForceALL(0, 5);
    MapFree();
}

def Opening2() {
    BlackOut();
    if (!get("進撃２")) {
        if (!get("進撃１")) {
            anonfn43();
        }
        InstantHeroFocus();
        MapInfoHide();
        Comeback();
        DisableSkip();
        WaitF(1);
        if (Normal()) {
            FadeIn(500);
            WaitM(100);
            TalkEvent("MS_0407a_HELP");
        }
        DispLoadWholeForce(5);
        set("進撃１");
        SetPreSallyFlag(1);
        SelectSallyEx(4);
        SetPreSallyFlag(0);
        EnableSkip();
        FadeOut_Wait(500);
        anonfn44();
        anonfn38();
        anonfn40();
        DispLoadWholeForce(5);
    }
    MapInfoShow();
    Comeback();
    DisableSkip();
    set("進撃２");
    SelectSallyEx(1);
    EnableSkip();
}

callback[Event.Turn](2, 2, 0) {
    if (!Normal()) {
        DisposWarp("bmap0407a_z03_h");
        DisposWarp("bmap0407a_z04_h");
    }
}

callback[Event.Turn](3, 3, 0) {
    if (!Normal()) {
        DisposWarp("bmap0407a_z01_h");
    }
}

callback[Event.Turn](4, 4, 0) {
    if (!Normal()) {
        DisposWarp("bmap0407a_z01b_h");
    }
}

callback[Event.Turn](5, 5, 0) {
    if (!Normal()) {
        DisposWarp("bmap0407a_z01b_h");
    }
}

callback[Event.Turn](6, 6, 0) {
    if (!Normal()) {
        DisposWarp("bmap0407a_z02_h");
    }
}

callback[Event.Turn](7, 7, 0) {
    if (!Normal()) {
        DisposWarp("bmap0407a_z01b_h");
    }
}

callback[Event.Turn](8, 8, 0) {
    if (!Normal()) {
        DisposWarp("bmap0407a_z05_h");
    }
}

callback[Event.Turn](9, 9, 0) {
    if (!Normal()) {
        DisposWarp("bmap0407a_z02_h");
    }
}

callback[Event.Turn](10, 10, 0) {
    if (!Normal()) {
        DisposWarp("bmap0407a_z01b_h");
    }
}

callback[Event.Turn](11, 11, 0) {
    if (!Normal()) {
        DisposWarp("bmap0407a_z05_h");
    }
}

callback[Event.Turn](12, 12, 0) {
    if (!Normal()) {
        DisposWarp("bmap0407a_z06_h");
    }
}

callback[Event.Turn](13, 13, 0) {
    if (!Normal()) {
        DisposWarp("bmap0407a_z05_h");
    }
    v0 = 1;
    v1 = ForceGetFirst(1);
    while (v0 != 0) {
        v0 = UnitGetNext(v1);
        UnitSetCpAttackSeq(v1, "SEQ_ALLUNITATTACK100");
        UnitSetCpMoveSeq(v1, "SEQ_NEARESTUNITMOVE");
        v1 = v0;
    }
}

callback[Event.Turn](2, 2, 0) {
    if (Normal()) {
        DisposWarpRank("bmap0407a_z01_n");
    }
}

callback[Event.Turn](3, 3, 0) {
    if (Normal()) {
        DisposWarp("bmap0407a_z03_n");
        DisposWarp("bmap0407a_z04_n");
    }
}

callback[Event.Turn](6, 6, 0) {
    if (Normal()) {
        DisposWarp("bmap0407a_z01_n");
    }
}

callback[Event.Turn](6, 6, 0) {
    if (Normal()) {
        DisposWarp("bmap0407a_z02_n");
    }
}

callback[Event.Turn](10, 10, 0) {
    if (Normal()) {
        DisposWarp("bmap0407a_z02_n");
    }
}

callback[Event.Turn](0, 0, 0) {
    v0 = BMGetTurn() - 3;
    if (v0 <= 0) {
        return 0;
    }
    if (v0 % 6 == 0) {
        v1 = ForceGetFirst(1);
        while (v1) {
            if (UnitQueryPID(v1, "PID_LEKAIN")) {
                UnitSetCpAttackSeq(v1, "SEQ_0407_ATK_LEKAIN1");
            }
            v1 = UnitGetNext(v1);
        }
    }
}

callback[Event.Turn](3, 3, 0) {
    v0 = ForceGetFirst(1);
    while (v0) {
        if (UnitQueryPID(v0, "PID_LEKAIN")) {
            UnitSetCpAttackSeq(v0, "SEQ_0407_ATK_LEKAIN1");
        }
        v0 = UnitGetNext(v0);
    }
}

callback[0x7]() {
    if (ForceGetCount(1) == 0) {
        v0 = UnitGetByPID("PID_SUMMON");
        UnitTransferToForce(v0, 2);
        v2 = UnitGetByPID("PID_MICAIAH");
        v3 = UnitGetByPID("PID_IKE");
        UnitTransferToForce(v2, 0);
        UnitTransferToForce(v3, 0);
        set("gf_complete");
    }
}

callback[Event.DieMap]("PID_IKE") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    set("gf_gameover");
    LocalDieTalkWithBgmChange("Hero", "MDIE_IKE");
}

callback[Event.DieMap]("PID_MICAIAH") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    set("gf_gameover");
    LocalDieTalkWithBgmChange("Hero", "MDIE_MICAIAH");
}

callback[Event.DieMap]("PID_SOTHE") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    set("gf_gameover");
    LocalDieTalkWithBgmChange("Hero", "MDIE_SOTHE");
}

callback[Event.DieMap]("PID_TIAMAT") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_TIAMAT");
}

callback[Event.DieMap]("PID_WAYU") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_WAYU");
}

callback[Event.DieMap]("PID_MIST") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_MIST");
}

callback[Event.DieMap]("PID_GATRIE") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_GATRIE");
}

callback[Event.DieMap]("PID_MORDY") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_MORDY");
}

callback[Event.DieMap]("PID_HAAR") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_HAAR");
}

callback[Event.DieMap]("PID_RETHE") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_RETHE");
}

callback[Event.DieMap]("PID_ELAICE") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_ELAICE");
}

callback[Event.DieMap]("PID_OSCAR") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_OSCAR");
}

callback[Event.DieMap]("PID_KILROY") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_KILROY");
}

callback[Event.DieMap]("PID_CHINON") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_CHINON");
}

callback[Event.DieMap]("PID_SENERIO") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_SENERIO");
}

callback[Event.DieMap]("PID_CHAP") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_CHAP");
}

callback[Event.DieMap]("PID_NEPHENEE") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_NEPHENEE");
}

callback[Event.DieMap]("PID_HEATHER") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_HEATHER");
}

callback[Event.DieMap]("PID_BOLE") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_BOLE");
}

callback[Event.DieMap]("PID_LOFA") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_LOFA");
}

callback[Event.DieMap]("PID_ENA") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_ENA");
}

callback[Event.DieMap]("PID_WUHALADA") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_WUHALADA");
}

callback[Event.DieMap]("PID_VULCI") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_VULCI");
}

callback[Event.DieMap]("PID_EDDIE") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_EDDIE");
}

callback[Event.DieMap]("PID_ERINCIA") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_ERINCIA");
}

callback[Event.DieMap]("PID_OLIVER") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_OLIVER");
}

callback[Event.DieMap]("PID_OLUGH") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_OLUGH");
}

callback[Event.DieMap]("PID_CAINEGHIS") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_CAINEGHIS");
}

callback[Event.DieMap]("PID_CALILL") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_CALILL");
}

callback[Event.DieMap]("PID_KISA") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_KISA");
}

callback[Event.DieMap]("PID_KURTHNAGA") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_KURTHNAGA");
}

callback[Event.DieMap]("PID_KEVIN") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_KEVIN");
}

callback[Event.DieMap]("PID_GORT") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_GORT");
}

callback[Event.DieMap]("PID_SANAKI") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_SANAKI");
}

callback[Event.DieMap]("PID_SIGRUN") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_SIGRUN");
}

callback[Event.DieMap]("PID_DARKKNIGHT_0") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_DARKKNIGHT");
}

callback[Event.DieMap]("PID_GIFFCA") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_GIFFCA");
}

callback[Event.DieMap]("PID_GEOFFRAY") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_GEOFFRAY");
}

callback[Event.DieMap]("PID_JILL") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_JILL");
}

callback[Event.DieMap]("PID_SKRIMIR") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_SKRIMIR");
}

callback[Event.DieMap]("PID_STELLA") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_STELLA");
}

callback[Event.DieMap]("PID_SOANEVALCKE") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_SOANEVALCKE");
}

callback[Event.DieMap]("PID_TAURONEO") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_TAURONEO");
}

callback[Event.DieMap]("PID_ZIHARK") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_ZIHARK");
}

callback[Event.DieMap]("PID_TIBARN") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_TIBARN");
}

callback[Event.DieMap]("PID_TOPUCK") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_TOPUCK");
}

callback[Event.DieMap]("PID_NEALUCHI") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_NEALUCHI");
}

callback[Event.DieMap]("PID_NIKE") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_NIKE");
}

callback[Event.DieMap]("PID_NAESALA") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_NAESALA");
}

callback[Event.DieMap]("PID_NOYCE") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_NOYCE");
}

callback[Event.DieMap]("PID_VIZE") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_VIZE");
}

callback[Event.DieMap]("PID_VOLKE") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_VOLKE");
}

callback[Event.DieMap]("PID_BRAD") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_BRAD");
}

callback[Event.DieMap]("PID_FRIEDA") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_FRIEDA");
}

callback[Event.DieMap]("PID_PELLEAS") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_PELLEAS");
}

callback[Event.DieMap]("PID_MARCIA") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_MARCIA");
}

callback[Event.DieMap]("PID_MAKAROV") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_MAKAROV");
}

callback[Event.DieMap]("PID_MWARIM") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_MWARIM");
}

callback[Event.DieMap]("PID_MEG") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_MEG");
}

callback[Event.DieMap]("PID_JANAFF") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_JANAFF");
}

callback[Event.DieMap]("PID_ULYSSES") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_ULYSSES");
}

callback[Event.DieMap]("PID_LAY") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_LAY");
}

callback[Event.DieMap]("PID_RAFIEL") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_RAFIEL");
}

callback[Event.DieMap]("PID_LEARNE") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_LEARNE");
}

callback[Event.DieMap]("PID_LIRE") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_LIRE");
}

callback[Event.DieMap]("PID_RIEUSION") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_RIEUSION");
}

callback[Event.DieMap]("PID_LUCHINO") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_LUCHINO");
}

callback[Event.DieMap]("PID_LEONARDO") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_LEONARDO");
}

callback[Event.DieMap]("PID_LENING") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_LENING");
}

callback[Event.DieMap]("PID_LAURA") {
    DisableSkip();
    
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_LAURA");
}

callback[Event.DieMap]("PID_WAYU") {
    DisableSkip();
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
    EnableSkip();
    LocalDieTalkWithBgmChange("Hero", "MDIE_WAYU");
}

callback[Event.DieBattle]("PID_LEKAIN", "", 1, "") {
    if (MindGetMind() != 93) {
        return 0;
    }
    if (!get("ボス会話全体サイレス１")) {
        TalkEvent_Map("MS_0407a_BT_SILENCE_1");
        set("ボス会話全体サイレス１");
        goto l2;
    }
    if (!get("ボス会話全体サイレス２")) {
        TalkEvent_Map("MS_0407a_BT_SILENCE_2");
        set("ボス会話全体サイレス２");
        goto l2;
    }
    TalkEvent_Map("MS_0407a_BT_SILENCE_3");
    clr("ボス会話全体サイレス１");
    clr("ボス会話全体サイレス２");
    label l2;
}

callback[Event.DieBattle]("PID_HETZEL", "", 1, "ボス会話") {
    if (BMGetPhase() == 1) {
        v0 = MindGetTarget();
        goto l1;
    }
    v0 = MindGetMe();
    label l1;
    TalkEvent_Boss("MS_0407a_BT");
    set("ボス会話");
}

callback[Event.DieBattle]("PID_LEKAIN", "", 1, "ボス会話2") {
    if (BMGetPhase() == 1) {
        v0 = MindGetTarget();
        goto l1;
    }
    v0 = MindGetMe();
    label l1;
    TalkEvent_Boss("MS_0407a_BT_L");
    set("ボス会話2");
}

callback[Event.DieMap]("PID_HETZEL") {
    TalkEvent_Map("MS_0407a_DIE_H");
}

callback[Event.DieMap]("PID_LEKAIN") {
    TalkEvent_Map("MS_0407a_DIE_L");
}

callback[0x1]("gf_complete") {
    if (get("ALONDITEGONE")){
        UnitGetItemShowing(UnitGetByPID("PID_IKE"), "IID_ETTARD2");
    }
    v0 = UnitGetByPID("PID_NAESALA");
    v1 = UnitGetByPID("PID_PELLEAS");
    BGMFadeOut(0, 1500);
    WaitM(1500);
    v2 = "MS_0407a_ED_01A";
    v3 = "MS_0407a_ED_01A_02";
    v4 = "MS_0407a_ED_01A_03";
    if (UnitCheckLive(v0) && UnitCheckExists(v0)) {
        if (UnitCheckLive(v1) && UnitCheckExists(v1)) {
            v2 = "MS_0407a_ED_01B";
            v3 = "MS_0407a_ED_01B_02";
            v4 = "MS_0407a_ED_01B_03";
            goto l4;
        }
        v2 = "MS_0407a_ED_01A";
        v3 = "MS_0407a_ED_01A_02";
        v4 = "MS_0407a_ED_01A_03";
        label l4;
        goto l5;
    }
    if (UnitCheckLive(v1) && UnitCheckExists(v1)) {
        v2 = "MS_0407a_ED_01D";
        v3 = "MS_0407a_ED_01D_02";
        v4 = "MS_0407a_ED_01D_03";
        goto l5;
    }
    v2 = "MS_0407a_ED_01C";
    v3 = "MS_0407a_ED_01C_02";
    v4 = "MS_0407a_ED_01C_03";
    label l5;
    FadeOut(1500);
    WaitM(750);
    AllUnitEscape();
    MapFree();
    BGMFadeIn(1, "BGM_ROOM_EVT_WIN_BAD1", 1000);
    FadeIn_Wait(500);
    TalkEvent(v2);
    EvRectSet("RID_MASK", 1);
    TalkResume();
    TalkEvent(v3);
    SFXPlay("SFX_EVT_0407A_WHITE_OUT1");
    v5 = EffectPlay("EID_CIRCLEFADE_OUT");
    EffectDepth(v5, 10);
    WaitM(2000);
    RectSet("TBG", 2, 100);
    RectSet("RID_MASK", 2, 200);
    EvRectSet("RID_WMASK", 1);
    RectSet("RID_WMASK", 2, 10);
    RectSet("TBG", 9, 0);
    WaitM(1000);
    EvRectSet("RID_471-消える誓約書02", 0);
    RectSet("RID_471-消える誓約書02", 2, 10);
    WaitM(1000);
    EffectDelete(v5);
    v6 = EffectPlay("EID_CIRCLEFADE_IN");
    EffectDepth(v6, 10);
    EvRectSet("RID_WMASK", 0);
    RectSet("RID_471-消える誓約書02", 9, 255);
    EffectWait(negate(1));
    WaitM(3000);
    FadeOut(1500);
    WaitM(750);
    WaitM(1500);
    RectKill("RID_WMASK");
    RectKill("RID_471-消える誓約書02");
    RectKill("RID_MASK");
    TalkResume();
    BlackOut();
    WaitM(100);
    TalkEvent(v4);
    BGMFadeOut(1, 1000);
    WaitM(1000);
    AllUnitEscape();
    MapFree();
    if (EvKeyReadK()) {
        anonfn15();
    }
    DFSet_0407a_ED();
}

callback[0xC]("") {
    Achieve_CLEAR_BONUS(4000, 4000);
    Achieve_TURN_BONUS(2000, 1000, 10, 15, 2000, 1000, 10, 15);
    Achieve_LIVE_BONUS(0, 0);
}

#PH Section

callback[Event.Turn](1, 1, 0){
    if(get("G_0403_SHUMMONSPARE")){
        TalkEvent("MS_407a_SHUUMONER_INTRO");
        if (!Normal()) {
            DisposWarp("bmap0407a_shuumoner_h");
        }
    }
    if (!Normal()) {
        DisposWarp("bmap0407a_casino_h");
    }
    UnitTransferToForceByPID("PID_RUDBECK", 3);
    if (DisposUnitCheckByPID("PID_RUDBECK")) {
        v0 = UnitGetByPID("PID_RUDBECK");
        UnitFocus(v0);
        TalkEvent("MS_BIFROST");
        v1 = UnitGetByPID("PID_LEKAIN");
        v2 = UnitSearchItem(v1, "IID_BIFROST");
        UnitDelItem(v1, v2);
    }
    if (!Normal()) {
        DisposWarp("bmap0407a_horses_h");
    }
    #set("gf_complete");
}

def explodinghonse() {
    if (BMGetPhase() == 0) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v3 = UnitSearchItem(v1, "IID_HORSE");
        if (v3 == UnitGetEquipWepI(v1)) {
            UnitFocus(v1);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v1, 0, "shoulder");
            EffectWait(v1);
            v5 = UnitGetMaxHP(v1);
            UnitSetHP(v1, 0);
            WaitF(250);
            UnitEscape(v1);
            UnitFocus(v0);
        }
    }
    if (BMGetPhase() == 1) {
        v0 = MindGetMe();
        v1 = MindGetTarget();
        v4 = UnitSearchItem(v0, "IID_HORSE");
        if (v4 == UnitGetEquipWepI(v0)) {
            UnitFocus(v0);
            v6 = EffectPlay("EID_BOLGANONE");
            EffectUnit(v6, v0, 0, "shoulder");
            EffectWait(v0);
            v5 = UnitGetMaxHP(v0);
            UnitSetHP(v0, 0);
            WaitF(250);
            UnitEscape(v0);
            UnitFocus(v1);
        }
    }
}

callback[Event.Turn](2, 2, 0) {
    DisableSkip();
    if (DisposUnitCheckByPID("PID_RUDBECK")) {
        v0 = UnitGetByPID("PID_RUDBECK");
        UnitFocus(v0);
        v1 = GetRnd(100);
        if (v1 >= 0 && v1 <=19) {
            #CasinoHealPlayers();
            TalkEvent("MS_HEALCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) { 
                v3 = UnitGetNext(v4);
                v5 = UnitGetMaxHP(v4);
                UnitSetHP(v4, v5);
                v6 = EffectPlay("EID_HERB");
                EffectUnit(v6, v4, 0, "shoulder");
                v4 = v3;
            }
            EffectWait(v3);
        }
        if (v1 >= 20 && v1 <= 34){
            #CasinoLaguzTransform();v4
            TalkEvent("MS_LAGUZCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                if ((UnitTstSkill(v4, "SID_ANIMALIZE"))) {
                    UnitFocus(v4);
                    #UnitTransform(v4, 1);
                    UnitMoveWait();
                    UnitSet(v4, 8, 30);
                }
                v4 = v3;
            }
        }
        if (v1 >= 35 && v1 <= 49){
            #CasinoRemoveSkill();
            if (!get("SKILL1")) {
                TalkEvent("MS_SKILLCASINO");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_MIRACLE");
                    v6 = EffectPlay("EID_MIRACLE");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }  
                EffectWait(v3);
                WaitM(500);
                set("SKILL1");
                goto l9;
            }
            if (get("SKILL1") && !get("SKILL2")) {
                TalkEvent("MS_SKILLCASINO1");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_VANTAGE");
                    v6 = EffectPlay("EID_HOWL");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }   
                EffectWait(v3);
                WaitM(500);
                set("SKILL2");
                goto l9;
            }
            if (get("SKILL2") && !get("SKILL3")) {
                TalkEvent("MS_SKILLCASINO2");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_CURE");
                    v6 = EffectPlay("EID_BOON_CURE");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }   
                EffectWait(v3);
                WaitM(500);
                set("SKILL3");
                goto l9;
            }
            label l9;
        }
        if (v1 >= 50 && v1 <= 64){
            CasinoGiveItem();
            TalkEvent("MS_ITEMCASINO");
            v8 = GetRnd(5);
            if (v8 == 1){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_PANAX");
            }
            if (v8 == 2){
                MindGetMoney(10000);
            }
            if (v8 == 3){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_GREATGREATBOW");
            }
            if (v8 == 4){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_BRAVEAXE");
            }
            if (v8 == 0){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_KAREAU");
            }
        }
        if (v1 >= 65 && v1 <= 79){
            #CasinoGiveEXP();
            TalkEvent("MS_EXPCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                v5 = UnitGet(v4, 7);
                v6 = v5 + 15;
                UnitSet(v4, 7, v6);
                v4 = v3;
            }
        }    
        if (v1 >= 80 && v1 <= 84){
            #CasinoGiveEternal();
            TalkEvent("MS_ETERNALCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                if (UnitGet(v4, 6) <= 6){
                    UnitSet(v4, 6, 1);
                    goto l1;
                }
                v5 = UnitGet(v4, 6);
                v6 = v5 - 5;
                UnitSet(v4, 6, v6);
                UnitSet(v4, 7, 0);
                label l1;
                v4 = v3;
            }
        }
        if (v1 >= 85 && v1 <= 99){
            #CasinoGreenUnit();
            TalkEvent("MS_GREENUNITCASINO");
            if (!get("GREEN1")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green1_h");
                }
                WaitM(500);
                set("GREEN1");
                goto l11;
            }
            if (get("GREEN1") && !get("GREEN2")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green2_h");
                }
                WaitM(500);
                set("GREEN2");
                goto l11;
            }
            if (get("GREEN2") && !get("GREEN3")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green3_h");
                }
                WaitM(500);
                set("GREEN3");
                goto l11;
            }
            label l11;
        }
    }
    EnableSkip();
}

callback[Event.Turn](3, 3, 0) {
    DisableSkip();
    if (DisposUnitCheckByPID("PID_RUDBECK")) {
        v0 = UnitGetByPID("PID_RUDBECK");
        UnitFocus(v0);
        v1 = GetRnd(100);
        if (v1 >= 0 && v1 <=19) {
            #CasinoHealPlayers();
            TalkEvent("MS_HEALCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) { 
                v3 = UnitGetNext(v4);
                v5 = UnitGetMaxHP(v4);
                UnitSetHP(v4, v5);
                v6 = EffectPlay("EID_HERB");
                EffectUnit(v6, v4, 0, "shoulder");
                v4 = v3;
            }
            EffectWait(v3);
        }
        if (v1 >= 20 && v1 <= 34){
            #CasinoLaguzTransform();v4
            TalkEvent("MS_LAGUZCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                if ((UnitTstSkill(v4, "SID_ANIMALIZE"))) {
                    UnitFocus(v4);
                    #UnitTransform(v4, 1);
                    UnitMoveWait();
                    UnitSet(v4, 8, 30);
                }
                v4 = v3;
            }
        }
        if (v1 >= 35 && v1 <= 49){
            #CasinoRemoveSkill();
            if (!get("SKILL1")) {
                TalkEvent("MS_SKILLCASINO");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_MIRACLE");
                    v6 = EffectPlay("EID_MIRACLE");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }  
                EffectWait(v3);
                WaitM(500);
                set("SKILL1");
                goto l9;
            }
            if (get("SKILL1") && !get("SKILL2")) {
                TalkEvent("MS_SKILLCASINO1");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_VANTAGE");
                    v6 = EffectPlay("EID_HOWL");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }   
                EffectWait(v3);
                WaitM(500);
                set("SKILL2");
                goto l9;
            }
            if (get("SKILL2") && !get("SKILL3")) {
                TalkEvent("MS_SKILLCASINO2");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_CURE");
                    v6 = EffectPlay("EID_BOON_CURE");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }   
                EffectWait(v3);
                WaitM(500);
                set("SKILL3");
                goto l9;
            }
            label l9;
        }
        if (v1 >= 50 && v1 <= 64){
            CasinoGiveItem();
            TalkEvent("MS_ITEMCASINO");
            v8 = GetRnd(5);
            if (v8 == 1){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_PANAX");
            }
            if (v8 == 2){
                MindGetMoney(10000);
            }
            if (v8 == 3){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_GREATGREATBOW");
            }
            if (v8 == 4){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_BRAVEAXE");
            }
            if (v8 == 0){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_KAREAU");
            }
        }
        if (v1 >= 65 && v1 <= 79){
            #CasinoGiveEXP();
            TalkEvent("MS_EXPCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                v5 = UnitGet(v4, 7);
                v6 = v5 + 15;
                UnitSet(v4, 7, v6);
                v4 = v3;
            }
        }    
        if (v1 >= 80 && v1 <= 84){
            #CasinoGiveEternal();
            TalkEvent("MS_ETERNALCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                if (UnitGet(v4, 6) <= 6){
                    UnitSet(v4, 6, 1);
                    goto l1;
                }
                v5 = UnitGet(v4, 6);
                v6 = v5 - 5;
                UnitSet(v4, 6, v6);
                UnitSet(v4, 7, 0);
                label l1;
                v4 = v3;
            }
        }
        if (v1 >= 85 && v1 <= 99){
            #CasinoGreenUnit();
            TalkEvent("MS_GREENUNITCASINO");
            if (!get("GREEN1")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green1_h");
                }
                WaitM(500);
                set("GREEN1");
                goto l11;
            }
            if (get("GREEN1") && !get("GREEN2")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green2_h");
                }
                WaitM(500);
                set("GREEN2");
                goto l11;
            }
            if (get("GREEN2") && !get("GREEN3")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green3_h");
                }
                WaitM(500);
                set("GREEN3");
                goto l11;
            }
            label l11;
        }
    }
    EnableSkip();
}

callback[Event.Turn](4, 4, 0) {
    DisableSkip();
    if (DisposUnitCheckByPID("PID_RUDBECK")) {
        v0 = UnitGetByPID("PID_RUDBECK");
        UnitFocus(v0);
        v1 = GetRnd(100);
        if (v1 >= 0 && v1 <=19) {
            #CasinoHealPlayers();
            TalkEvent("MS_HEALCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) { 
                v3 = UnitGetNext(v4);
                v5 = UnitGetMaxHP(v4);
                UnitSetHP(v4, v5);
                v6 = EffectPlay("EID_HERB");
                EffectUnit(v6, v4, 0, "shoulder");
                v4 = v3;
            }
            EffectWait(v3);
        }
        if (v1 >= 20 && v1 <= 34){
            #CasinoLaguzTransform();v4
            TalkEvent("MS_LAGUZCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                if ((UnitTstSkill(v4, "SID_ANIMALIZE"))) {
                    UnitFocus(v4);
                    #UnitTransform(v4, 1);
                    UnitMoveWait();
                    UnitSet(v4, 8, 30);
                }
                v4 = v3;
            }
        }
        if (v1 >= 35 && v1 <= 49){
            #CasinoRemoveSkill();
            if (!get("SKILL1")) {
                TalkEvent("MS_SKILLCASINO");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_MIRACLE");
                    v6 = EffectPlay("EID_MIRACLE");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }  
                EffectWait(v3);
                WaitM(500);
                set("SKILL1");
                goto l9;
            }
            if (get("SKILL1") && !get("SKILL2")) {
                TalkEvent("MS_SKILLCASINO1");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_VANTAGE");
                    v6 = EffectPlay("EID_HOWL");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }   
                EffectWait(v3);
                WaitM(500);
                set("SKILL2");
                goto l9;
            }
            if (get("SKILL2") && !get("SKILL3")) {
                TalkEvent("MS_SKILLCASINO2");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_CURE");
                    v6 = EffectPlay("EID_BOON_CURE");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }   
                EffectWait(v3);
                WaitM(500);
                set("SKILL3");
                goto l9;
            }
            label l9;
        }
        if (v1 >= 50 && v1 <= 64){
            CasinoGiveItem();
            TalkEvent("MS_ITEMCASINO");
            v8 = GetRnd(5);
            if (v8 == 1){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_PANAX");
            }
            if (v8 == 2){
                MindGetMoney(10000);
            }
            if (v8 == 3){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_GREATGREATBOW");
            }
            if (v8 == 4){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_BRAVEAXE");
            }
            if (v8 == 0){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_KAREAU");
            }
        }
        if (v1 >= 65 && v1 <= 79){
            #CasinoGiveEXP();
            TalkEvent("MS_EXPCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                v5 = UnitGet(v4, 7);
                v6 = v5 + 15;
                UnitSet(v4, 7, v6);
                v4 = v3;
            }
        }    
        if (v1 >= 80 && v1 <= 84){
            #CasinoGiveEternal();
            TalkEvent("MS_ETERNALCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                if (UnitGet(v4, 6) <= 6){
                    UnitSet(v4, 6, 1);
                    goto l1;
                }
                v5 = UnitGet(v4, 6);
                v6 = v5 - 5;
                UnitSet(v4, 6, v6);
                UnitSet(v4, 7, 0);
                label l1;
                v4 = v3;
            }
        }
        if (v1 >= 85 && v1 <= 99){
            #CasinoGreenUnit();
            TalkEvent("MS_GREENUNITCASINO");
            if (!get("GREEN1")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green1_h");
                }
                WaitM(500);
                set("GREEN1");
                goto l11;
            }
            if (get("GREEN1") && !get("GREEN2")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green2_h");
                }
                WaitM(500);
                set("GREEN2");
                goto l11;
            }
            if (get("GREEN2") && !get("GREEN3")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green3_h");
                }
                WaitM(500);
                set("GREEN3");
                goto l11;
            }
            label l11;
        }
    }
    EnableSkip();
}

callback[Event.Turn](5, 5, 0) {
    DisableSkip();
    if (DisposUnitCheckByPID("PID_RUDBECK")) {
        v0 = UnitGetByPID("PID_RUDBECK");
        UnitFocus(v0);
        v1 = GetRnd(100);
        if (v1 >= 0 && v1 <=19) {
            #CasinoHealPlayers();
            TalkEvent("MS_HEALCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) { 
                v3 = UnitGetNext(v4);
                v5 = UnitGetMaxHP(v4);
                UnitSetHP(v4, v5);
                v6 = EffectPlay("EID_HERB");
                EffectUnit(v6, v4, 0, "shoulder");
                v4 = v3;
            }
            EffectWait(v3);
        }
        if (v1 >= 20 && v1 <= 34){
            #CasinoLaguzTransform();v4
            TalkEvent("MS_LAGUZCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                if ((UnitTstSkill(v4, "SID_ANIMALIZE"))) {
                    UnitFocus(v4);
                    #UnitTransform(v4, 1);
                    UnitMoveWait();
                    UnitSet(v4, 8, 30);
                }
                v4 = v3;
            }
        }
        if (v1 >= 35 && v1 <= 49){
            #CasinoRemoveSkill();
            if (!get("SKILL1")) {
                TalkEvent("MS_SKILLCASINO");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_MIRACLE");
                    v6 = EffectPlay("EID_MIRACLE");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }  
                EffectWait(v3);
                WaitM(500);
                set("SKILL1");
                goto l9;
            }
            if (get("SKILL1") && !get("SKILL2")) {
                TalkEvent("MS_SKILLCASINO1");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_VANTAGE");
                    v6 = EffectPlay("EID_HOWL");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }   
                EffectWait(v3);
                WaitM(500);
                set("SKILL2");
                goto l9;
            }
            if (get("SKILL2") && !get("SKILL3")) {
                TalkEvent("MS_SKILLCASINO2");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_CURE");
                    v6 = EffectPlay("EID_BOON_CURE");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }   
                EffectWait(v3);
                WaitM(500);
                set("SKILL3");
                goto l9;
            }
            label l9;
        }
        if (v1 >= 50 && v1 <= 64){
            CasinoGiveItem();
            TalkEvent("MS_ITEMCASINO");
            v8 = GetRnd(5);
            if (v8 == 1){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_PANAX");
            }
            if (v8 == 2){
                MindGetMoney(10000);
            }
            if (v8 == 3){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_GREATGREATBOW");
            }
            if (v8 == 4){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_BRAVEAXE");
            }
            if (v8 == 0){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_KAREAU");
            }
        }
        if (v1 >= 65 && v1 <= 79){
            #CasinoGiveEXP();
            TalkEvent("MS_EXPCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                v5 = UnitGet(v4, 7);
                v6 = v5 + 15;
                UnitSet(v4, 7, v6);
                v4 = v3;
            }
        }    
        if (v1 >= 80 && v1 <= 84){
            #CasinoGiveEternal();
            TalkEvent("MS_ETERNALCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                if (UnitGet(v4, 6) <= 6){
                    UnitSet(v4, 6, 1);
                    goto l1;
                }
                v5 = UnitGet(v4, 6);
                v6 = v5 - 5;
                UnitSet(v4, 6, v6);
                UnitSet(v4, 7, 0);
                label l1;
                v4 = v3;
            }
        }
        if (v1 >= 85 && v1 <= 99){
            #CasinoGreenUnit();
            TalkEvent("MS_GREENUNITCASINO");
            if (!get("GREEN1")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green1_h");
                }
                WaitM(500);
                set("GREEN1");
                goto l11;
            }
            if (get("GREEN1") && !get("GREEN2")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green2_h");
                }
                WaitM(500);
                set("GREEN2");
                goto l11;
            }
            if (get("GREEN2") && !get("GREEN3")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green3_h");
                }
                WaitM(500);
                set("GREEN3");
                goto l11;
            }
            label l11;
        }
    }
    EnableSkip();
}

callback[Event.Turn](6, 6, 0) {
    DisableSkip();
    if (DisposUnitCheckByPID("PID_RUDBECK")) {
        v0 = UnitGetByPID("PID_RUDBECK");
        UnitFocus(v0);
        v1 = GetRnd(100);
        if (v1 >= 0 && v1 <=19) {
            #CasinoHealPlayers();
            TalkEvent("MS_HEALCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) { 
                v3 = UnitGetNext(v4);
                v5 = UnitGetMaxHP(v4);
                UnitSetHP(v4, v5);
                v6 = EffectPlay("EID_HERB");
                EffectUnit(v6, v4, 0, "shoulder");
                v4 = v3;
            }
            EffectWait(v3);
        }
        if (v1 >= 20 && v1 <= 34){
            #CasinoLaguzTransform();v4
            TalkEvent("MS_LAGUZCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                if ((UnitTstSkill(v4, "SID_ANIMALIZE"))) {
                    UnitFocus(v4);
                    #UnitTransform(v4, 1);
                    UnitMoveWait();
                    UnitSet(v4, 8, 30);
                }
                v4 = v3;
            }
        }
        if (v1 >= 35 && v1 <= 49){
            #CasinoRemoveSkill();
            if (!get("SKILL1")) {
                TalkEvent("MS_SKILLCASINO");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_MIRACLE");
                    v6 = EffectPlay("EID_MIRACLE");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }  
                EffectWait(v3);
                WaitM(500);
                set("SKILL1");
                goto l9;
            }
            if (get("SKILL1") && !get("SKILL2")) {
                TalkEvent("MS_SKILLCASINO1");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_VANTAGE");
                    v6 = EffectPlay("EID_HOWL");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }   
                EffectWait(v3);
                WaitM(500);
                set("SKILL2");
                goto l9;
            }
            if (get("SKILL2") && !get("SKILL3")) {
                TalkEvent("MS_SKILLCASINO2");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_CURE");
                    v6 = EffectPlay("EID_BOON_CURE");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }   
                EffectWait(v3);
                WaitM(500);
                set("SKILL3");
                goto l9;
            }
            label l9;
        }
        if (v1 >= 50 && v1 <= 64){
            CasinoGiveItem();
            TalkEvent("MS_ITEMCASINO");
            v8 = GetRnd(5);
            if (v8 == 1){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_PANAX");
            }
            if (v8 == 2){
                MindGetMoney(10000);
            }
            if (v8 == 3){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_GREATGREATBOW");
            }
            if (v8 == 4){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_BRAVEAXE");
            }
            if (v8 == 0){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_KAREAU");
            }
        }
        if (v1 >= 65 && v1 <= 79){
            #CasinoGiveEXP();
            TalkEvent("MS_EXPCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                v5 = UnitGet(v4, 7);
                v6 = v5 + 15;
                UnitSet(v4, 7, v6);
                v4 = v3;
            }
        }    
        if (v1 >= 80 && v1 <= 84){
            #CasinoGiveEternal();
            TalkEvent("MS_ETERNALCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                if (UnitGet(v4, 6) <= 6){
                    UnitSet(v4, 6, 1);
                    goto l1;
                }
                v5 = UnitGet(v4, 6);
                v6 = v5 - 5;
                UnitSet(v4, 6, v6);
                UnitSet(v4, 7, 0);
                label l1;
                v4 = v3;
            }
        }
        if (v1 >= 85 && v1 <= 99){
            #CasinoGreenUnit();
            TalkEvent("MS_GREENUNITCASINO");
            if (!get("GREEN1")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green1_h");
                }
                WaitM(500);
                set("GREEN1");
                goto l11;
            }
            if (get("GREEN1") && !get("GREEN2")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green2_h");
                }
                WaitM(500);
                set("GREEN2");
                goto l11;
            }
            if (get("GREEN2") && !get("GREEN3")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green3_h");
                }
                WaitM(500);
                set("GREEN3");
                goto l11;
            }
            label l11;
        }
    }
    EnableSkip();
}

callback[Event.Turn](7, 7, 0) {
    DisableSkip();
    if (DisposUnitCheckByPID("PID_RUDBECK")) {
        v0 = UnitGetByPID("PID_RUDBECK");
        UnitFocus(v0);
        v1 = GetRnd(100);
        if (v1 >= 0 && v1 <=19) {
            #CasinoHealPlayers();
            TalkEvent("MS_HEALCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) { 
                v3 = UnitGetNext(v4);
                v5 = UnitGetMaxHP(v4);
                UnitSetHP(v4, v5);
                v6 = EffectPlay("EID_HERB");
                EffectUnit(v6, v4, 0, "shoulder");
                v4 = v3;
            }
            EffectWait(v3);
        }
        if (v1 >= 20 && v1 <= 34){
            #CasinoLaguzTransform();v4
            TalkEvent("MS_LAGUZCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                if ((UnitTstSkill(v4, "SID_ANIMALIZE"))) {
                    UnitFocus(v4);
                    #UnitTransform(v4, 1);
                    UnitMoveWait();
                    UnitSet(v4, 8, 30);
                }
                v4 = v3;
            }
        }
        if (v1 >= 35 && v1 <= 49){
            #CasinoRemoveSkill();
            if (!get("SKILL1")) {
                TalkEvent("MS_SKILLCASINO");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_MIRACLE");
                    v6 = EffectPlay("EID_MIRACLE");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }  
                EffectWait(v3);
                WaitM(500);
                set("SKILL1");
                goto l9;
            }
            if (get("SKILL1") && !get("SKILL2")) {
                TalkEvent("MS_SKILLCASINO1");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_VANTAGE");
                    v6 = EffectPlay("EID_HOWL");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }   
                EffectWait(v3);
                WaitM(500);
                set("SKILL2");
                goto l9;
            }
            if (get("SKILL2") && !get("SKILL3")) {
                TalkEvent("MS_SKILLCASINO2");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_CURE");
                    v6 = EffectPlay("EID_BOON_CURE");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }   
                EffectWait(v3);
                WaitM(500);
                set("SKILL3");
                goto l9;
            }
            label l9;
        }
        if (v1 >= 50 && v1 <= 64){
            CasinoGiveItem();
            TalkEvent("MS_ITEMCASINO");
            v8 = GetRnd(5);
            if (v8 == 1){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_PANAX");
            }
            if (v8 == 2){
                MindGetMoney(10000);
            }
            if (v8 == 3){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_GREATGREATBOW");
            }
            if (v8 == 4){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_BRAVEAXE");
            }
            if (v8 == 0){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_KAREAU");
            }
        }
        if (v1 >= 65 && v1 <= 79){
            #CasinoGiveEXP();
            TalkEvent("MS_EXPCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                v5 = UnitGet(v4, 7);
                v6 = v5 + 15;
                UnitSet(v4, 7, v6);
                v4 = v3;
            }
        }    
        if (v1 >= 80 && v1 <= 84){
            #CasinoGiveEternal();
            TalkEvent("MS_ETERNALCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                if (UnitGet(v4, 6) <= 6){
                    UnitSet(v4, 6, 1);
                    goto l1;
                }
                v5 = UnitGet(v4, 6);
                v6 = v5 - 5;
                UnitSet(v4, 6, v6);
                UnitSet(v4, 7, 0);
                label l1;
                v4 = v3;
            }
        }
        if (v1 >= 85 && v1 <= 99){
            #CasinoGreenUnit();
            TalkEvent("MS_GREENUNITCASINO");
            if (!get("GREEN1")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green1_h");
                }
                WaitM(500);
                set("GREEN1");
                goto l11;
            }
            if (get("GREEN1") && !get("GREEN2")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green2_h");
                }
                WaitM(500);
                set("GREEN2");
                goto l11;
            }
            if (get("GREEN2") && !get("GREEN3")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green3_h");
                }
                WaitM(500);
                set("GREEN3");
                goto l11;
            }
            label l11;
        }
    }
    EnableSkip();
}

callback[Event.Turn](8, 8, 0) {
    DisableSkip();
    if (DisposUnitCheckByPID("PID_RUDBECK")) {
        v0 = UnitGetByPID("PID_RUDBECK");
        UnitFocus(v0);
        v1 = GetRnd(100);
        if (v1 >= 0 && v1 <=19) {
            #CasinoHealPlayers();
            TalkEvent("MS_HEALCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) { 
                v3 = UnitGetNext(v4);
                v5 = UnitGetMaxHP(v4);
                UnitSetHP(v4, v5);
                v6 = EffectPlay("EID_HERB");
                EffectUnit(v6, v4, 0, "shoulder");
                v4 = v3;
            }
            EffectWait(v3);
        }
        if (v1 >= 20 && v1 <= 34){
            #CasinoLaguzTransform();v4
            TalkEvent("MS_LAGUZCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                if ((UnitTstSkill(v4, "SID_ANIMALIZE"))) {
                    UnitFocus(v4);
                    #UnitTransform(v4, 1);
                    UnitMoveWait();
                    UnitSet(v4, 8, 30);
                }
                v4 = v3;
            }
        }
        if (v1 >= 35 && v1 <= 49){
            #CasinoRemoveSkill();
            if (!get("SKILL1")) {
                TalkEvent("MS_SKILLCASINO");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_MIRACLE");
                    v6 = EffectPlay("EID_MIRACLE");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }  
                EffectWait(v3);
                WaitM(500);
                set("SKILL1");
                goto l9;
            }
            if (get("SKILL1") && !get("SKILL2")) {
                TalkEvent("MS_SKILLCASINO1");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_VANTAGE");
                    v6 = EffectPlay("EID_HOWL");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }   
                EffectWait(v3);
                WaitM(500);
                set("SKILL2");
                goto l9;
            }
            if (get("SKILL2") && !get("SKILL3")) {
                TalkEvent("MS_SKILLCASINO2");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_CURE");
                    v6 = EffectPlay("EID_BOON_CURE");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }   
                EffectWait(v3);
                WaitM(500);
                set("SKILL3");
                goto l9;
            }
            label l9;
        }
        if (v1 >= 50 && v1 <= 64){
            CasinoGiveItem();
            TalkEvent("MS_ITEMCASINO");
            v8 = GetRnd(5);
            if (v8 == 1){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_PANAX");
            }
            if (v8 == 2){
                MindGetMoney(10000);
            }
            if (v8 == 3){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_GREATGREATBOW");
            }
            if (v8 == 4){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_BRAVEAXE");
            }
            if (v8 == 0){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_KAREAU");
            }
        }
        if (v1 >= 65 && v1 <= 79){
            #CasinoGiveEXP();
            TalkEvent("MS_EXPCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                v5 = UnitGet(v4, 7);
                v6 = v5 + 15;
                UnitSet(v4, 7, v6);
                v4 = v3;
            }
        }    
        if (v1 >= 80 && v1 <= 84){
            #CasinoGiveEternal();
            TalkEvent("MS_ETERNALCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                if (UnitGet(v4, 6) <= 6){
                    UnitSet(v4, 6, 1);
                    goto l1;
                }
                v5 = UnitGet(v4, 6);
                v6 = v5 - 5;
                UnitSet(v4, 6, v6);
                UnitSet(v4, 7, 0);
                label l1;
                v4 = v3;
            }
        }
        if (v1 >= 85 && v1 <= 99){
            #CasinoGreenUnit();
            TalkEvent("MS_GREENUNITCASINO");
            if (!get("GREEN1")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green1_h");
                }
                WaitM(500);
                set("GREEN1");
                goto l11;
            }
            if (get("GREEN1") && !get("GREEN2")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green2_h");
                }
                WaitM(500);
                set("GREEN2");
                goto l11;
            }
            if (get("GREEN2") && !get("GREEN3")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green3_h");
                }
                WaitM(500);
                set("GREEN3");
                goto l11;
            }
            label l11;
        }
    }
    EnableSkip();
}

callback[Event.Turn](9, 9, 0) {
    DisableSkip();
    if (DisposUnitCheckByPID("PID_RUDBECK")) {
        v0 = UnitGetByPID("PID_RUDBECK");
        UnitFocus(v0);
        v1 = GetRnd(100);
        if (v1 >= 0 && v1 <=19) {
            #CasinoHealPlayers();
            TalkEvent("MS_HEALCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) { 
                v3 = UnitGetNext(v4);
                v5 = UnitGetMaxHP(v4);
                UnitSetHP(v4, v5);
                v6 = EffectPlay("EID_HERB");
                EffectUnit(v6, v4, 0, "shoulder");
                v4 = v3;
            }
            EffectWait(v3);
        }
        if (v1 >= 20 && v1 <= 34){
            #CasinoLaguzTransform();v4
            TalkEvent("MS_LAGUZCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                if ((UnitTstSkill(v4, "SID_ANIMALIZE"))) {
                    UnitFocus(v4);
                    #UnitTransform(v4, 1);
                    UnitMoveWait();
                    UnitSet(v4, 8, 30);
                }
                v4 = v3;
            }
        }
        if (v1 >= 35 && v1 <= 49){
            #CasinoRemoveSkill();
            if (!get("SKILL1")) {
                TalkEvent("MS_SKILLCASINO");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_MIRACLE");
                    v6 = EffectPlay("EID_MIRACLE");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }  
                EffectWait(v3);
                WaitM(500);
                set("SKILL1");
                goto l9;
            }
            if (get("SKILL1") && !get("SKILL2")) {
                TalkEvent("MS_SKILLCASINO1");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_VANTAGE");
                    v6 = EffectPlay("EID_HOWL");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }   
                EffectWait(v3);
                WaitM(500);
                set("SKILL2");
                goto l9;
            }
            if (get("SKILL2") && !get("SKILL3")) {
                TalkEvent("MS_SKILLCASINO2");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_CURE");
                    v6 = EffectPlay("EID_BOON_CURE");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }   
                EffectWait(v3);
                WaitM(500);
                set("SKILL3");
                goto l9;
            }
            label l9;
        }
        if (v1 >= 50 && v1 <= 64){
            CasinoGiveItem();
            TalkEvent("MS_ITEMCASINO");
            v8 = GetRnd(5);
            if (v8 == 1){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_PANAX");
            }
            if (v8 == 2){
                MindGetMoney(10000);
            }
            if (v8 == 3){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_GREATGREATBOW");
            }
            if (v8 == 4){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_BRAVEAXE");
            }
            if (v8 == 0){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_KAREAU");
            }
        }
        if (v1 >= 65 && v1 <= 79){
            #CasinoGiveEXP();
            TalkEvent("MS_EXPCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                v5 = UnitGet(v4, 7);
                v6 = v5 + 15;
                UnitSet(v4, 7, v6);
                v4 = v3;
            }
        }    
        if (v1 >= 80 && v1 <= 84){
            #CasinoGiveEternal();
            TalkEvent("MS_ETERNALCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                if (UnitGet(v4, 6) <= 6){
                    UnitSet(v4, 6, 1);
                    goto l1;
                }
                v5 = UnitGet(v4, 6);
                v6 = v5 - 5;
                UnitSet(v4, 6, v6);
                UnitSet(v4, 7, 0);
                label l1;
                v4 = v3;
            }
        }
        if (v1 >= 85 && v1 <= 99){
            #CasinoGreenUnit();
            if (!get("GREEN1")) {
                if (!Normal()) {
                    TalkEvent("MS_GREENUNITCASINO1");
                    DisposWarp("bmap0407a_green1_h");
                }
                WaitM(500);
                set("GREEN1");
                goto l11;
            }
            if (get("GREEN1") && !get("GREEN2")) {
                if (!Normal()) {
                    TalkEvent("MS_GREENUNITCASINO2");
                    DisposWarp("bmap0407a_green2_h");
                }
                WaitM(500);
                set("GREEN2");
                goto l11;
            }
            if (get("GREEN2") && !get("GREEN3")) {
                if (!Normal()) {
                    TalkEvent("MS_GREENUNITCASINO3");
                    DisposWarp("bmap0407a_green3_h");
                }
                WaitM(500);
                set("GREEN3");
                goto l11;
            }
            label l11;
        }
    }
    EnableSkip();
}

callback[Event.Turn](10, 10, 0) {
    DisableSkip();
    if (DisposUnitCheckByPID("PID_RUDBECK")) {
        v0 = UnitGetByPID("PID_RUDBECK");
        UnitFocus(v0);
        v1 = GetRnd(100);
        if (v1 >= 0 && v1 <=19) {
            #CasinoHealPlayers();
            TalkEvent("MS_HEALCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) { 
                v3 = UnitGetNext(v4);
                v5 = UnitGetMaxHP(v4);
                UnitSetHP(v4, v5);
                v6 = EffectPlay("EID_HERB");
                EffectUnit(v6, v4, 0, "shoulder");
                v4 = v3;
            }
            EffectWait(v3);
        }
        if (v1 >= 20 && v1 <= 34){
            #CasinoLaguzTransform();v4
            TalkEvent("MS_LAGUZCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                if ((UnitTstSkill(v4, "SID_ANIMALIZE"))) {
                    UnitFocus(v4);
                    #UnitTransform(v4, 1);
                    UnitMoveWait();
                    UnitSet(v4, 8, 30);
                }
                v4 = v3;
            }
        }
        if (v1 >= 35 && v1 <= 49){
            #CasinoRemoveSkill();
            if (!get("SKILL1")) {
                TalkEvent("MS_SKILLCASINO");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_MIRACLE");
                    v6 = EffectPlay("EID_MIRACLE");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }  
                EffectWait(v3);
                WaitM(500);
                set("SKILL1");
                goto l9;
            }
            if (get("SKILL1") && !get("SKILL2")) {
                TalkEvent("MS_SKILLCASINO1");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_VANTAGE");
                    v6 = EffectPlay("EID_HOWL");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }   
                EffectWait(v3);
                WaitM(500);
                set("SKILL2");
                goto l9;
            }
            if (get("SKILL2") && !get("SKILL3")) {
                TalkEvent("MS_SKILLCASINO2");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_CURE");
                    v6 = EffectPlay("EID_BOON_CURE");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }   
                EffectWait(v3);
                WaitM(500);
                set("SKILL3");
                goto l9;
            }
            label l9;
        }
        if (v1 >= 50 && v1 <= 64){
            CasinoGiveItem();
            TalkEvent("MS_ITEMCASINO");
            v8 = GetRnd(5);
            if (v8 == 1){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_PANAX");
            }
            if (v8 == 2){
                MindGetMoney(10000);
            }
            if (v8 == 3){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_GREATGREATBOW");
            }
            if (v8 == 4){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_BRAVEAXE");
            }
            if (v8 == 0){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_KAREAU");
            }
        }
        if (v1 >= 65 && v1 <= 79){
            #CasinoGiveEXP();
            TalkEvent("MS_EXPCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                v5 = UnitGet(v4, 7);
                v6 = v5 + 15;
                UnitSet(v4, 7, v6);
                v4 = v3;
            }
        }    
        if (v1 >= 80 && v1 <= 84){
            #CasinoGiveEternal();
            TalkEvent("MS_ETERNALCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                if (UnitGet(v4, 6) <= 6){
                    UnitSet(v4, 6, 1);
                    goto l1;
                }
                v5 = UnitGet(v4, 6);
                v6 = v5 - 5;
                UnitSet(v4, 6, v6);
                UnitSet(v4, 7, 0);
                label l1;
                v4 = v3;
            }
        }
        if (v1 >= 85 && v1 <= 99){
            #CasinoGreenUnit();
            TalkEvent("MS_GREENUNITCASINO");
            if (!get("GREEN1")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green1_h");
                }
                WaitM(500);
                set("GREEN1");
                goto l11;
            }
            if (get("GREEN1") && !get("GREEN2")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green2_h");
                }
                WaitM(500);
                set("GREEN2");
                goto l11;
            }
            if (get("GREEN2") && !get("GREEN3")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green3_h");
                }
                WaitM(500);
                set("GREEN3");
                goto l11;
            }
            label l11;
        }
    }
    EnableSkip();
}

def roulette() {
    DisableSkip();
    if (DisposUnitCheckByPID("PID_RUDBECK")) {
        v0 = UnitGetByPID("PID_RUDBECK");
        UnitFocus(v0);
        v1 = GetRnd(100);
        if (v1 >= 0 && v1 <=19) {
            #CasinoHealPlayers();
            TalkEvent("MS_HEALCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) { 
                v3 = UnitGetNext(v4);
                v5 = UnitGetMaxHP(v4);
                UnitSetHP(v4, v5);
                v6 = EffectPlay("EID_HERB");
                EffectUnit(v6, v4, 0, "shoulder");
                v4 = v3;
            }
            EffectWait(v3);
        }
        if (v1 >= 20 && v1 <= 34){
            #CasinoLaguzTransform();v4
            TalkEvent("MS_LAGUZCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                if ((UnitTstSkill(v4, "SID_ANIMALIZE"))) {
                    UnitFocus(v4);
                    #UnitTransform(v4, 1);
                    UnitMoveWait();
                    UnitSet(v4, 8, 30);
                }
                v4 = v3;
            }
        }
        if (v1 >= 35 && v1 <= 49){
            #CasinoRemoveSkill();
            if (!get("SKILL1")) {
                TalkEvent("MS_SKILLCASINO");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_MIRACLE");
                    v6 = EffectPlay("EID_MIRACLE");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }  
                EffectWait(v3);
                WaitM(500);
                set("SKILL1");
                goto l9;
            }
            if (get("SKILL1") && !get("SKILL2")) {
                TalkEvent("MS_SKILLCASINO1");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_VANTAGE");
                    v6 = EffectPlay("EID_HOWL");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }   
                EffectWait(v3);
                WaitM(500);
                set("SKILL2");
                goto l9;
            }
            if (get("SKILL2") && !get("SKILL3")) {
                TalkEvent("MS_SKILLCASINO2");
                v3 = 1;
                v4 = ForceGetFirst(1);
                while (v3 != 0) {
                    v3 = UnitGetNext(v4);
                    UnitClrSkill(v4, "SID_CURE");
                    v6 = EffectPlay("EID_BOON_CURE");
                    EffectUnit(v6, v4, 0, "shoulder");
                    v4 = v3;
                }   
                EffectWait(v3);
                WaitM(500);
                set("SKILL3");
                goto l9;
            }
            label l9;
        }
        if (v1 >= 50 && v1 <= 64){
            CasinoGiveItem();
            TalkEvent("MS_ITEMCASINO");
            v8 = GetRnd(5);
            if (v8 == 1){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_PANAX");
            }
            if (v8 == 2){
                MindGetMoney(10000);
            }
            if (v8 == 3){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_GREATGREATBOW");
            }
            if (v8 == 4){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_BRAVEAXE");
            }
            if (v8 == 0){
                UnitGetItemShowing(UnitGetByPID("PID_MICAIAH"), "IID_KAREAU");
            }
        }
        if (v1 >= 65 && v1 <= 79){
            #CasinoGiveEXP();
            TalkEvent("MS_EXPCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                v5 = UnitGet(v4, 7);
                v6 = v5 + 15;
                UnitSet(v4, 7, v6);
                v4 = v3;
            }
        }    
        if (v1 >= 80 && v1 <= 84){
            #CasinoGiveEternal();
            TalkEvent("MS_ETERNALCASINO");
            v3 = 1;
            v4 = ForceGetFirst(0);
            while (v3 != 0) {
                v3 = UnitGetNext(v4);
                if (UnitGet(v4, 6) <= 6){
                    UnitSet(v4, 6, 1);
                    goto l1;
                }
                v5 = UnitGet(v4, 6);
                v6 = v5 - 5;
                UnitSet(v4, 6, v6);
                UnitSet(v4, 7, 0);
                label l1;
                v4 = v3;
            }
        }
        if (v1 >= 85 && v1 <= 99){
            #CasinoGreenUnit();
            TalkEvent("MS_GREENUNITCASINO");
            if (!get("GREEN1")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green1_h");
                }
                WaitM(500);
                set("GREEN1");
                goto l11;
            }
            if (get("GREEN1") && !get("GREEN2")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green2_h");
                }
                WaitM(500);
                set("GREEN2");
                goto l11;
            }
            if (get("GREEN2") && !get("GREEN3")) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_green3_h");
                }
                WaitM(500);
                set("GREEN3");
                goto l11;
            }
            label l11;
        }
    }
    EnableSkip();
}

callback[Event.Turn](11, 11, 0) {
    if (DisposUnitCheckByPID("PID_RUDBECK")) {
        v0 = UnitGetByPID("PID_RUDBECK");
        v1 = UnitGetByPID("PID_LEKAIN");
        v2 = UnitGetByPID("PID_HETZEL");
        v3 = EffectPlay("EID_MIRACLE");
        UnitFocus(v0);
        TalkEvent("MS_MANTLE");
        UnitFocus(v1);
        UnitClrSkill(v1, "SID_MANTLE");
        EffectUnit(v3, v1, 0, "shoulder");
        WaitM(500);
        UnitFocus(v2);
        UnitClrSkill(v2, "SID_MANTLE");
        EffectUnit(v3, v2, 0, "shoulder");
        WaitM(500);
        UnitFocus(v1);
        TalkEvent("MS_0407a_PHKILLCASINO");
        UnitAnim_SpeedLoop(v1, "イベント２", 100);
        WaitM(800);
        UnitFocus(v0);
        v4 = UnitGetX(v0);
        v5 = UnitGetY(v0);
        EffectPlayPos("EID_THANY", v4, v5);
        set("CASINO_DEAD");
        WaitM(200);
        LocalDieTalkWithBgmChange("Hero", "MS_0407a_DIE_CASINO");
        UnitDeadEscape(v0);
        EffectWait(negate(1));
        UnitAnim(v1, "待機");
        EffectWait(negate(1));
    }
}

callback[Event.DieMap]("PID_RUDBECK") {
    if (!get("CASINO_DEAD")){
        set("gf_gameover");
    }
    LocalDieTalkWithBgmChange("Hero", "MS_0407a_DIE_CASINO");
}

#DSNOON Section

callback[Event.Turn](1, 1, 0) {
    v0 = UnitGetByPID("PID_HETZEL");
    UnitFocus(v0);
    DisableSkip();
    BGM0Pause();
    FadeNone();
    WaitF(1);
    MoviePlay("Movie/DsnoonDeal.thp");
    Comeback();
    BGM0Continue();
    TalkEvent("MS_0407a_DSNOON0A");
    Dialog3Items("MS_0407a_DSNOON1A", "MS_0407a_DSNOON1B", "MS_0407a_DSNOON1C");
    EnableSkip();
    v1 = DialogGetRes();
    if (v1 == 0) {
        TalkEvent("MS_0407a_DSNOON_CHOICE1A");
        v3 = 1;
        v4 = ForceGetFirst(0);
        while (v3 != 0) {
            v3 = UnitGetNext(v4);
            v5 = UnitSearchItem(v4, "IID_EGG");
            if(UnitSearchItem(v4, "IID_EGG") > 1) {
                if (!Normal()) {
                    DisposWarp("bmap0407a_EGGDRAGON_h");
                }
                v6 = UnitGetX(v4);
                v7 = UnitGetY(v4);
                v8 = UnitGetByPID("PID_EGGDRAGON");
                UnitMoveWait();
                UnitWalkSpeed(1);
                UnitWalkTime(1);
                UnitMovePos(v8, v6, v7); 
                UnitDelItem(v4, v5);
            }
            v4 = v3;
        }
    }
    if (v1 == 1) {
        TalkEvent("MS_0407a_DSNOON_CHOICE1B");
        DelItemsFromForce(0, "IID_ETTARD2");
        DelItemsFromForce(5, "IID_ETTARD2");
        DelItemsFromCurrentWarehouse("IID_ETTARD2");
        #v2 = UnitGetByPID("PID_IKE");
        #v3 = UnitSearchItem(v2, "IID_ETTARD2");
        #UnitDelItem(v2, v3);
        set("ALONDITEGONE");
    }
    if (v1 == 2) {
        TalkEvent("MS_0407a_DSNOON_CHOICE1C");
        UnitSetCpAttackSeq(v0, "SEQ_ALLUNITATTACK100");
        UnitSetCpMoveSeq(v0, "SEQ_NEARESTUNITMOVE");
        v2 = UnitGetByPos(23, 12);
        UnitSetCpAttackSeq(v2, "SEQ_ALLUNITATTACK100");
        UnitSetCpMoveSeq(v2, "SEQ_TEAMCOMMANDERMOVE");
        v3 = UnitGetByPos(23, 10);
        UnitSetCpAttackSeq(v3, "SEQ_ALLUNITATTACK100");
        UnitSetCpMoveSeq(v3, "SEQ_TEAMCOMMANDERMOVE");
        v4 = UnitGetByPos(22, 11);
        UnitSetCpAttackSeq(v4, "SEQ_ALLUNITATTACK100");
        UnitSetCpMoveSeq(v4, "SEQ_TEAMCOMMANDERMOVE");
        v5 = UnitGetByPos(24, 11);
        UnitSetCpAttackSeq(v5, "SEQ_ALLUNITATTACK100");
        UnitSetCpMoveSeq(v5, "SEQ_TEAMCOMMANDERMOVE");
        set("FUCKOFFDSNOON");
    }
}

callback[Event.Turn](6, 6, 0) {
    if(!get("FUCKOFFDSNOON")){
        v0 = UnitGetByPID("PID_HETZEL");
        UnitFocus(v0);
        TalkEvent("MS_0407a_DSNOON0B");
        Dialog3Items("MS_0407a_DSNOON2A", "MS_0407a_DSNOON2B", "MS_0407a_DSNOON2C");
        v1 = DialogGetRes();
        if (v1 == 0) {
            TalkEvent("MS_0407a_DSNOON_CHOICE2A");
            if (DisposUnitCheckByPID("PID_RAFIEL")) {
                v2 = UnitGetByPID("PID_RAFIEL");
                UnitFocus(v2);
                UnitEscape(v2);
            }
            if (DisposUnitCheckByPID("PID_LEARNE")) {
                v2 = UnitGetByPID("PID_LEARNE");
                UnitFocus(v2);
                UnitEscape(v2);
            }
            if (DisposUnitCheckByPID("PID_RIEUSION")) {
                v2 = UnitGetByPID("PID_RIEUSION");
                UnitFocus(v2);
                UnitEscape(v2);
            }
        }
        if (v1 == 1) {
            TalkEvent("MS_0407a_DSNOON_CHOICE2B");
            v2 = UnitGetByPID("PID_MICAIAH");
            v3 = UnitGetByPID("PID_IKE");
            UnitTransferToForce(v2, 2);
            UnitTransferToForce(v3, 2);
            UnitSetCpAttackSeq(v2, "SEQ_ALLUNITATTACK100");
            UnitSetCpMoveSeq(v2, "SEQ_NEARESTUNITMOVE");
            v3 = UnitGetByPos(23, 10);
            UnitSetCpAttackSeq(v3, "SEQ_ALLUNITATTACK100");
            UnitSetCpMoveSeq(v3, "SEQ_NEARESTUNITMOVE");
        }
        if (v1 == 2) {
            TalkEvent("MS_0407a_DSNOON_CHOICE1C");
            UnitSetCpAttackSeq(v0, "SEQ_ALLUNITATTACK100");
            UnitSetCpMoveSeq(v0, "SEQ_NEARESTUNITMOVE");
            v2 = UnitGetByPos(23, 12);
            UnitSetCpAttackSeq(v2, "SEQ_ALLUNITATTACK100");
            UnitSetCpMoveSeq(v2, "SEQ_TEAMCOMMANDERMOVE");
            v3 = UnitGetByPos(23, 10);
            UnitSetCpAttackSeq(v3, "SEQ_ALLUNITATTACK100");
            UnitSetCpMoveSeq(v3, "SEQ_TEAMCOMMANDERMOVE");
            v4 = UnitGetByPos(22, 11);
            UnitSetCpAttackSeq(v4, "SEQ_ALLUNITATTACK100");
            UnitSetCpMoveSeq(v4, "SEQ_TEAMCOMMANDERMOVE");
            v5 = UnitGetByPos(24, 11);
            UnitSetCpAttackSeq(v5, "SEQ_ALLUNITATTACK100");
            UnitSetCpMoveSeq(v5, "SEQ_TEAMCOMMANDERMOVE");
            set("FUCKOFFDSNOON");
        }
    }
}

callback[Event.Turn](9, 9, 0) {
    if(!get("FUCKOFFDSNOON")){
        v0 = UnitGetByPID("PID_HETZEL");
        UnitFocus(v0);
        TalkEvent("MS_0407a_DSNOON0C");
        Dialog3Items("MS_0407a_DSNOON3A", "MS_0407a_DSNOON3B", "MS_0407a_DSNOON3C");
        v1 = DialogGetRes();
        if (v1 == 0) {
            TalkEvent("MS_0407a_DSNOON_CHOICE3A");
            if (!Normal()) {
                DisposWarp("bmap0407a_CUCKOLD_h");
            }
            v2 = UnitGetByPID("PID_CUCKOLD");
            UnitFocus(v2);
            TalkEvent("MS_0407a_CUCKOLD");
        }
        if (v1 == 1) {
            TalkEvent("MS_0407a_DSNOON_CHOICE3B");
            v2 = UnitGetByPID("PID_IKE");
            UnitFocus(v2);
            UnitDeadEscape(v2);
            set("gf_gameover");
        }
        if (v1 == 2) {
            TalkEvent("MS_0407a_DSNOON_CHOICE1C");
            UnitSetCpAttackSeq(v0, "SEQ_ALLUNITATTACK100");
            UnitSetCpMoveSeq(v0, "SEQ_NEARESTUNITMOVE");
            v2 = UnitGetByPos(23, 12);
            UnitSetCpAttackSeq(v2, "SEQ_ALLUNITATTACK100");
            UnitSetCpMoveSeq(v2, "SEQ_TEAMCOMMANDERMOVE");
            v3 = UnitGetByPos(23, 10);
            UnitSetCpAttackSeq(v3, "SEQ_ALLUNITATTACK100");
            UnitSetCpMoveSeq(v3, "SEQ_TEAMCOMMANDERMOVE");
            v4 = UnitGetByPos(22, 11);
            UnitSetCpAttackSeq(v4, "SEQ_ALLUNITATTACK100");
            UnitSetCpMoveSeq(v4, "SEQ_TEAMCOMMANDERMOVE");
            v5 = UnitGetByPos(24, 11);
            UnitSetCpAttackSeq(v5, "SEQ_ALLUNITATTACK100");
            UnitSetCpMoveSeq(v5, "SEQ_TEAMCOMMANDERMOVE");
            set("FUCKOFFDSNOON");
        }
    }
}

callback[Event.TurnAfter](1, 1, 0) {
    v0 = 1;
    v1 = ForceGetFirst(0);
    while (v0 != 0) {
        v0 = UnitGetNext(v1);
        if ((UnitTstSkill(v1, "SID_ANIMALIZE"))) {
            UnitFocus(v1);
            UnitTransform(v1, 1);
            UnitMoveWait();
            UnitSet(v1, 8, 30);
        }
        v1 = v0;
    }
    UnitFocusByPID("PID_MICAIAH");
}

callback[Event.TurnAfter](1, 99, 0) {
    v0 = UnitGetByPID("PID_LEKAIN");
    v1 = UnitSearchItem(v0, "IID_REWARP");
    if (0 <= v1) {
        UnitDelItem(v0, v1);
    }
    UnitAdditem(v0, v1);
}

callback[Event.TurnAfter](0, 0, 0) {
    v0 = UnitGetByPID("PID_MICAIAH");
    if ((DisposUnitCheckByPID("PID_MICAIAH")) && (UnitQueryJID(v0, "JID_SUMMONER"))) {
        if (!DisposUnitCheckByPID("PID_SUMMON")) {
            DisableSkip();
            UnitFocus(v0);
            Dialog2Items("MS_SUMMON_YES", "MS_SUMMON_NO");
            v2 = DialogGetRes();
            if (v2 == 0) {
                TalkEvent("MS_SUMMON");
                if (!Normal()) {
                    DisposWarp("bmap0313_summon1_h");
                }
                v0 = UnitGetByPID("PID_SUMMON");
                v1 = UnitGetByPID("PID_MICAIAH");
                v2 = UnitGet(v1, 6);
                UnitSet(v0, 6, v2);
                v0 = UnitGetByPID("PID_SUMMON");
                v1 = UnitGet(v0, 6);
                if (v1 <= 5){
                    v1 = GetRnd(4);
                    if (v1 == 0){
                        UnitAddItem(v0, "IID_IRONLANCE");
                        v7 = UnitSearchItem(v0, "IID_IRONLANCE");
                        UnitItemSetSealSteal(v0, v7);
                    }
                    if (v1 == 1){
                        UnitAddItem(v0, "IID_STEELLANCE");
                        v7 = UnitSearchItem(v0, "IID_STEELLANCE");
                        UnitItemSetSealSteal(v0, v7);
                    }
                    if (v1 == 2){
                        UnitAddItem(v0, "IID_HANDSPEAR");
                        v7 = UnitSearchItem(v0, "IID_HANDSPEAR");
                        UnitItemSetSealSteal(v0, v7);
                    }
                    if (v1 == 3){
                        UnitAddItem(v0, "IID_IRONSPEAR");
                        v7 = UnitSearchItem(v0, "IID_IRONSPEAR");
                        UnitItemSetSealSteal(v0, v7);
                    }
                    if (v1 == 4){
                        UnitAddItem(v0, "IID_POISONLANCE");
                        v7 = UnitSearchItem(v0, "IID_POISONLANCE");
                        UnitItemSetSealSteal(v0, v7);
                    }
                }
                if ((v1 > 5) && (v1 <= 10)){
                    v1 = GetRnd(4);
                    if (v1 == 0){
                        UnitAddItem(v0, "IID_THUNDERSPEAR");
                        v7 = UnitSearchItem(v0, "IID_THUNDERSPEAR");
                        UnitItemSetSealSteal(v0, v7);
                    }
                    if (v1 == 1){
                        UnitAddItem(v0, "IID_KILLERLANCE");
                        v7 = UnitSearchItem(v0, "IID_KILLERLANCE");
                        UnitItemSetSealSteal(v0, v7);
                    }
                    if (v1 == 2){
                        UnitAddItem(v0, "IID_HORSEKILLER");
                        v7 = UnitSearchItem(v0, "IID_HORSEKILLER");
                        UnitItemSetSealSteal(v0, v7);
                    }
                    if (v1 == 3){
                        UnitAddItem(v0, "IID_BEASTLANCE");
                        v7 = UnitSearchItem(v0, "IID_BEASTLANCE");
                        UnitItemSetSealSteal(v0, v7);
                    }
                    if (v1 == 4){
                        UnitAddItem(v0, "IID_SILVERLANCE");
                        v7 = UnitSearchItem(v0, "IID_SILVERLANCE");
                        UnitItemSetSealSteal(v0, v7);
                    }
                }
                if ((v1 > 10) && (v1 <= 15)){
                    v1 = GetRnd(4);
                    if (v1 == 0){
                        UnitAddItem(v0, "IID_BRAVELANCE");
                        v7 = UnitSearchItem(v0, "IID_BRAVELANCE");
                        UnitItemSetSealSteal(v0, v7);
                    }
                    if (v1 == 1){
                        UnitAddItem(v0, "IID_FLAMELANCE");
                        v7 = UnitSearchItem(v0, "IID_FLAMELANCE");
                        UnitItemSetSealSteal(v0, v7);
                    }
                    if (v1 == 2){
                        UnitAddItem(v0, "IID_SHORTSPEAR");
                        v7 = UnitSearchItem(v0, "IID_SHORTSPEAR");
                        UnitItemSetSealSteal(v0, v7);
                    }
                    if (v1 == 3){
                        UnitAddItem(v0, "IID_SILVERSPEAR");
                        v7 = UnitSearchItem(v0, "IID_SILVERSPEAR");
                        UnitItemSetSealSteal(v0, v7);
                    }
                    if (v1 == 4){
                        UnitAddItem(v0, "IID_HEAVYSPEAR");
                        v7 = UnitSearchItem(v0, "IID_HEAVYSPEAR");
                        UnitItemSetSealSteal(v0, v7);
                    }
                }
                if ((v1 > 15) && (v1 <= 20)){
                    v1 = GetRnd(4);
                    if (v1 == 0){
                        UnitAddItem(v0, "IID_GREATGREATSPEAR");
                        v7 = UnitSearchItem(v0, "IID_GREATGREATSPEAR");
                        UnitItemSetSealSteal(v0, v7);
                    }
                    if (v1 == 1){
                        UnitAddItem(v0, "IID_FLAMELANCE");
                        v7 = UnitSearchItem(v0, "IID_FLAMELANCE");
                        UnitItemSetSealSteal(v0, v7);
                    }
                    if (v1 == 2){
                        UnitAddItem(v0, "IID_SLENDERSPEAR");
                        v7 = UnitSearchItem(v0, "IID_SLENDERSPEAR");
                        UnitItemSetSealSteal(v0, v7);
                    }
                    if (v1 == 3){
                        v8 = GetRnd(9999);
                        if (v8 == 1){
                            UnitAddItem(v0, "IID_CUCKOLD");
                            v7 = UnitSearchItem(v0, "IID_CUCKOLD");
                            UnitItemSetSealSteal(v0, v7);
                        }
                        if (v8 != 1){
                            UnitAddItem(v0, "IID_ZANEZPHTE");
                            v7 = UnitSearchItem(v0, "IID_ZANEZPHTE");
                            UnitItemSetSealSteal(v0, v7);
                        }
                    }
                    if (v1 == 4){
                        UnitAddItem(v0, "IID_BRAVELANCE");
                        v7 = UnitSearchItem(v0, "IID_BRAVELANCE");
                        UnitItemSetSealSteal(v0, v7);
                    }
                }
                UnitAddItem(v0, "IID_BONES");
                UnitAddItem(v0, "IID_BONES");
                UnitAddItem(v0, "IID_BONES");
                UnitAddItem(v0, "IID_BONES");
                UnitAddItem(v0, "IID_BONES");
                UnitAddItem(v0, "IID_BONES");
                v0 = UnitGetByPID("PID_MICAIAH");
                v3 = UnitGetX(v0);
                v4 = UnitGetY(v0);
                v0 = UnitGetByPID("PID_SUMMON");
                #UnitMovePosDir(v0, v3, v4, 4);
                UnitMoveWait();
                UnitWalkSpeed(1);
                UnitWalkTime(1);
                UnitMovePos(v0, v3, v4);   
                #UnitWaitAnim(0);
                goto end;
            }
            if (v2 == 1) {
                TalkEvent("MS_NOSUMMON");
                goto end;
            }
            label end;
            UnitFocusByPID("PID_MICAIAH");
            EnableSkip();
        }
    }
    UnitFocusByPID("PID_MICAIAH");
}

def LegionEquip(){
    v0 = UnitGetByPID("PID_SUMMON");
    v1 = UnitGet(v0, 6);
    if (v1 <= 5){
        v1 = GetRnd(4);
        if (v1 == 0){
            UnitAddItem(v0, "IID_IRONLANCE");
            v7 = UnitSearchItem(v0, "IID_IRONLANCE");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 1){
            UnitAddItem(v0, "IID_STEELLANCE");
            v7 = UnitSearchItem(v0, "IID_STEELLANCE");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 2){
            UnitAddItem(v0, "IID_HANDSPEAR");
            v7 = UnitSearchItem(v0, "IID_HANDSPEAR");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 3){
            UnitAddItem(v0, "IID_IRONSPEAR");
            v7 = UnitSearchItem(v0, "IID_IRONSPEAR");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 4){
            UnitAddItem(v0, "IID_POISONLANCE");
            v7 = UnitSearchItem(v0, "IID_POISONLANCE");
            UnitItemSetSealSteal(v0, v7);
        }
    }
    if ((v1 > 5) && (v1 <= 10)){
        v1 = GetRnd(4);
        if (v1 == 0){
            UnitAddItem(v0, "IID_THUNDERSPEAR");
            v7 = UnitSearchItem(v0, "IID_THUNDERSPEAR");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 1){
            UnitAddItem(v0, "IID_KILLERLANCE");
            v7 = UnitSearchItem(v0, "IID_KILLERLANCE");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 2){
            UnitAddItem(v0, "IID_HORSEKILLER");
            v7 = UnitSearchItem(v0, "IID_HORSEKILLER");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 3){
            UnitAddItem(v0, "IID_BEASTLANCE");
            v7 = UnitSearchItem(v0, "IID_BEASTLANCE");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 4){
            UnitAddItem(v0, "IID_SILVERLANCE");
            v7 = UnitSearchItem(v0, "IID_SILVERLANCE");
            UnitItemSetSealSteal(v0, v7);
        }
    }
    if ((v1 > 10) && (v1 <= 15)){
        v1 = GetRnd(4);
        if (v1 == 0){
            UnitAddItem(v0, "IID_BRAVELANCE");
            v7 = UnitSearchItem(v0, "IID_BRAVELANCE");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 1){
            UnitAddItem(v0, "IID_FLAMELANCE");
            v7 = UnitSearchItem(v0, "IID_FLAMELANCE");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 2){
            UnitAddItem(v0, "IID_SHORTSPEAR");
            v7 = UnitSearchItem(v0, "IID_SHORTSPEAR");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 3){
            UnitAddItem(v0, "IID_SILVERSPEAR");
            v7 = UnitSearchItem(v0, "IID_SILVERSPEAR");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 4){
            UnitAddItem(v0, "IID_HEAVYSPEAR");
            v7 = UnitSearchItem(v0, "IID_HEAVYSPEAR");
            UnitItemSetSealSteal(v0, v7);
        }
    }
    if ((v1 > 15) && (v1 <= 20)){
        v1 = GetRnd(4);
        if (v1 == 0){
            UnitAddItem(v0, "IID_GREATGREATSPEAR");
            v7 = UnitSearchItem(v0, "IID_GREATGREATSPEAR");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 1){
            UnitAddItem(v0, "IID_FLAMELANCE");
            v7 = UnitSearchItem(v0, "IID_FLAMELANCE");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 2){
            UnitAddItem(v0, "IID_SLENDERSPEAR");
            v7 = UnitSearchItem(v0, "IID_SLENDERSPEAR");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 3){
            v8 = GetRnd(9999);
            if (v8 == 1){
                UnitAddItem(v0, "IID_CUCKOLD");
                v7 = UnitSearchItem(v0, "IID_CUCKOLD");
                UnitItemSetSealSteal(v0, v7);
            }
            if (v8 != 1){
                UnitAddItem(v0, "IID_ZANEZPHTE");
                v7 = UnitSearchItem(v0, "IID_ZANEZPHTE");
                UnitItemSetSealSteal(v0, v7);
            }
        }
        if (v1 == 4){
            UnitAddItem(v0, "IID_BRAVELANCE");
            v7 = UnitSearchItem(v0, "IID_BRAVELANCE");
            UnitItemSetSealSteal(v0, v7);
        }
    }
    UnitAddItem(v0, "IID_BONES");
    UnitAddItem(v0, "IID_BONES");
    UnitAddItem(v0, "IID_BONES");
    UnitAddItem(v0, "IID_BONES");
    UnitAddItem(v0, "IID_BONES");
    UnitAddItem(v0, "IID_BONES");
}

callback[0x7](){
    v0 = UnitGetByPID("PID_SUMMON");
    v1 = UnitGetHP(v0);
    if (UnitGetHP(v0) == 0){
        UnitEscape(v0);
    }
    if (UnitGetHP(v0) == 1){
        UnitEscape(v0);
    }
}

def savescript() {
    v0 = UnitGetByPID("PID_SUMMON");
    v1 = UnitGet(v0, 6);
    if (v1 <= 5){
        v1 = GetRnd(4);
        if (v1 == 0){
            UnitAddItem(v0, "IID_IRONLANCE");
            v7 = UnitSearchItem(v0, "IID_IRONLANCE");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 1){
            UnitAddItem(v0, "IID_STEELLANCE");
            v7 = UnitSearchItem(v0, "IID_STEELLANCE");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 2){
            UnitAddItem(v0, "IID_HANDSPEAR");
            v7 = UnitSearchItem(v0, "IID_HANDSPEAR");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 3){
            UnitAddItem(v0, "IID_IRONSPEAR");
            v7 = UnitSearchItem(v0, "IID_IRONSPEAR");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 4){
            UnitAddItem(v0, "IID_POISONLANCE");
            v7 = UnitSearchItem(v0, "IID_POISONLANCE");
            UnitItemSetSealSteal(v0, v7);
        }
    }
    if ((v1 > 5) && (v1 <= 10)){
        v1 = GetRnd(4);
        if (v1 == 0){
            UnitAddItem(v0, "IID_THUNDERSPEAR");
            v7 = UnitSearchItem(v0, "IID_THUNDERSPEAR");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 1){
            UnitAddItem(v0, "IID_KILLERLANCE");
            v7 = UnitSearchItem(v0, "IID_KILLERLANCE");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 2){
            UnitAddItem(v0, "IID_HORSEKILLER");
            v7 = UnitSearchItem(v0, "IID_HORSEKILLER");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 3){
            UnitAddItem(v0, "IID_BEASTLANCE");
            v7 = UnitSearchItem(v0, "IID_BEASTLANCE");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 4){
            UnitAddItem(v0, "IID_SILVERLANCE");
            v7 = UnitSearchItem(v0, "IID_SILVERLANCE");
            UnitItemSetSealSteal(v0, v7);
        }
    }
    if ((v1 > 10) && (v1 <= 15)){
        v1 = GetRnd(4);
        if (v1 == 0){
            UnitAddItem(v0, "IID_BRAVELANCE");
            v7 = UnitSearchItem(v0, "IID_BRAVELANCE");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 1){
            UnitAddItem(v0, "IID_FLAMELANCE");
            v7 = UnitSearchItem(v0, "IID_FLAMELANCE");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 2){
            UnitAddItem(v0, "IID_SHORTSPEAR");
            v7 = UnitSearchItem(v0, "IID_SHORTSPEAR");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 3){
            UnitAddItem(v0, "IID_SILVERSPEAR");
            v7 = UnitSearchItem(v0, "IID_SILVERSPEAR");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 4){
            UnitAddItem(v0, "IID_HEAVYSPEAR");
            v7 = UnitSearchItem(v0, "IID_HEAVYSPEAR");
            UnitItemSetSealSteal(v0, v7);
        }
    }
    if ((v1 > 15) && (v1 <= 20)){
        v1 = GetRnd(4);
        if (v1 == 0){
            UnitAddItem(v0, "IID_GREATGREATSPEAR");
            v7 = UnitSearchItem(v0, "IID_GREATGREATSPEAR");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 1){
            UnitAddItem(v0, "IID_FLAMELANCE");
            v7 = UnitSearchItem(v0, "IID_FLAMELANCE");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 2){
            UnitAddItem(v0, "IID_SLENDERSPEAR");
            v7 = UnitSearchItem(v0, "IID_SLENDERSPEAR");
            UnitItemSetSealSteal(v0, v7);
        }
        if (v1 == 3){
            v8 = GetRnd(9999);
            if (v8 == 1){
                UnitAddItem(v0, "IID_CUCKOLD");
                v7 = UnitSearchItem(v0, "IID_CUCKOLD");
                UnitItemSetSealSteal(v0, v7);
            }
            if (v8 != 1){
                UnitAddItem(v0, "IID_ZANEZPHTE");
                v7 = UnitSearchItem(v0, "IID_ZANEZPHTE");
                UnitItemSetSealSteal(v0, v7);
            }
        }
        if (v1 == 4){
            UnitAddItem(v0, "IID_BRAVELANCE");
            v7 = UnitSearchItem(v0, "IID_BRAVELANCE");
            UnitItemSetSealSteal(v0, v7);
        }
    }
}